"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[86955],{839924:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.getGuildIdentitySettingsPatch=l;t.getGuildIdentitySettingsPatchWithDifferences=function(e){var t,n=e.guild,r=e.user,u=e.guildMember,o=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++){n=a[r];t.indexOf(n)>=0||(i[n]=e[n])}return i}(e,a),s=null!==(t=i.default.getNickname(null==n?void 0:n.id,void 0,r))&&void 0!==t?t:void 0,d=l(o);d.bio===(null==u?void 0:u.bio)&&delete d.bio;d.nick===s&&delete d.nick;if(0===Object.keys(d).length)return null;return d};var r,i=(r=n(29652))&&r.__esModule?r:{default:r},a=["guild","user","guildMember"];function l(e){var t=e.pendingAvatar,n=e.pendingNickname,r=e.pendingBanner,i=e.pendingBio,a={};void 0!==t&&(a.avatar=t);void 0!==r&&(a.banner=r);null!=i&&(a.bio=i);void 0!==n&&(a.nick=n);return a}},862976:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0})
;t.default=E;var r,i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}r.default=e;n&&n.set(e,r);return r}(n(667294)),a=n(536211),l=f(n(669879)),u=f(n(871778)),o=n(799393),s=f(n(350957)),d=n(839924);function f(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function p(e,t,n,i){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,l=arguments.length-3;if(t||0===l||(t={children:void 0}),1===l)t.children=i;else if(l>1){
for(var u=new Array(l),o=0;o<l;o++)u[o]=arguments[o+3];t.children=u}if(t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function v(e,t,n,r,i,a,l){try{var u=e[a](l),o=u.value}catch(e){n(e);return}u.done?t(o):Promise.resolve(o).then(r,i)}function g(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function l(e){v(a,r,i,l,u,"next",e)}function u(e){v(a,r,i,l,u,"throw",e)}l(void 0)}))}}function E(){var e=(0,a.useStateFromStores)([u.default],(function(){return u.default.theme})),t=(0,a.useStateFromStores)([s.default],(function(){return s.default.getIsDisableSubmit()})),n=(0,a.useStateFromStores)([s.default],(function(){return s.default.getGuild()})),r=i.useState(!1),f=r[0],c=r[1],v=i.useCallback(g(regeneratorRuntime.mark((function e(){var t,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(!0)
;t=s.default.getAllPending();r=(0,d.getGuildIdentitySettingsPatch)(t);if(0!==Object.keys(r).length){e.next=5;break}return e.abrupt("return");case 5:e.next=7;return(0,o.saveGuildIdentityChanges)(null==n?void 0:n.id,r);case 7:(null==(i=e.sent)?void 0:i.ok)&&(0,o.resetAllPending)();c(!1);case 10:case"end":return e.stop()}}),e)}))),[null==n?void 0:n.id]),E=i.useCallback((function(){(0,o.resetAllPending)()}),[]);return p(l.default,{theme:e,submitting:f,onSave:v,onReset:E,disabled:t})}E.displayName="GuildIdentitySettingsNotice"},799017:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=X
;var r,i=F(n(667294)),a=D(n(441143)),l=n(235234),u=n(536211),o=D(n(226800)),s=D(n(898361)),d=D(n(844784)),f=F(n(125478)),c=D(n(468532)),p=D(n(845176)),v=D(n(482117)),g=D(n(498163)),E=D(n(561511)),_=D(n(876874)),m=D(n(871778)),I=D(n(728429)),y=D(n(956117)),N=D(n(380439)),S=D(n(60097)),P=D(n(730977)),b=D(n(41024)),O=D(n(417184)),M=n(194322),h=D(n(776360)),T=D(n(308920)),A=D(n(838583)),C=n(799393),R=D(n(350957)),k=D(n(862976)),L=D(n(65139)),G=n(770348),U=n(265517),w=D(n(247001)),B=D(n(923247));function D(e){return e&&e.__esModule?e:{default:e}}function j(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(j=function(e){return e?n:t})(e)}function F(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=j(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){
var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}r.default=e;n&&n.set(e,r);return r}function W(e,t,n,i){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,l=arguments.length-3;if(t||0===l||(t={children:void 0}),1===l)t.children=i;else if(l>1){for(var u=new Array(l),o=0;o<l;o++)u[o]=arguments[o+3];t.children=u}if(t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function x(){x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};return x.apply(this,arguments)}function H(e,t,n,r,i,a,l){try{var u=e[a](l),o=u.value}catch(e){n(e);return}u.done?t(o):Promise.resolve(o).then(r,i)}function Y(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){
var a=e.apply(t,n);function l(e){H(a,r,i,l,u,"next",e)}function u(e){H(a,r,i,l,u,"throw",e)}l(void 0)}))}}function z(){T.default.track(G.AnalyticEvents.PREMIUM_PROMOTION_OPENED,{location_page:G.AnalyticsPages.GUILD_MEMBER_PROFILE_SETTINGS,location_object:G.AnalyticsObjects.BADGE});(0,C.closeGuildIdentitySettings)();o.default.open(G.UserSettingsSections.PREMIUM)}function K(e){(0,M.openModalLazy)(Y(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.next=2;return Promise.all([n.e(40532),n.e(83084)]).then(n.bind(n,858023));case 2:r=t.sent;a=r.default;return t.abrupt("return",(function(t){return i.createElement(a,x({source:x({},e,{page:G.AnalyticsPages.GUILD_MEMBER_PROFILE_SETTINGS})},t))}));case 5:case"end":return t.stop()}}),t)}))))}function V(e){var t=e.onUpsellClick;i.useEffect((function(){T.default.track(G.AnalyticEvents.PREMIUM_UPSELL_VIEWED,{
type:U.PremiumUpsellTypes.PREMIUM_GUILD_MEMBER_PROFILE_UPSELL_INLINE,location:{page:G.AnalyticsPages.GUILD_CHANNEL,section:G.AnalyticsSections.PREMIUM_GUILD_MEMBER_PROFILE}})}),[]);return W("div",{className:B.default.upsellContainer},void 0,W(h.default,{},void 0,w.default.Messages.GUILD_IDENTITY_SETTINGS_UPSELL_NO_LINK),W(S.default,{size:y.default.Sizes.SMALL,onClick:t,color:y.default.Colors.GREEN,className:B.default.upsellButton,innerClassName:B.default.upsellButtonInner},void 0,W(b.default,{className:B.default.premiumIconButton}),w.default.Messages.CHANGE_IDENTITY_UPSELL))}V.displayName="InlineUpsell";var $="GUILD_IDENTITY_SETTINGS_PAGE";function Z(){var e,t,n=(0,u.useStateFromStores)([I.default],(function(){var e=I.default.getCurrentUser();(0,a.default)(null!=e,"GuildIdentitySettingsPage: user cannot be undefined");return e})),r=(0,u.useStateFromStoresObject)([R.default],(function(){var e=R.default.getAllPending(),t=e.pendingAvatar,n=e.pendingNickname,r=e.pendingBio;return{
pendingAvatar:t,pendingNickname:n,pendingBanner:e.pendingBanner,pendingBio:r,errors:R.default.getErrors(),guild:R.default.getGuild(),source:R.default.getSource()}})),s=r.pendingAvatar,m=r.pendingNickname,y=r.pendingBanner,S=r.pendingBio,M=r.errors,T=r.guild,k=r.source,U=(0,u.useStateFromStores)([_.default],(function(){return null==T?null:_.default.getMember(T.id,n.id)}));i.useEffect((function(){null!=k&&d.default.trackWithMetadata(G.AnalyticEvents.SETTINGS_PANE_VIEWED,{settings_type:"guild",destination_pane:G.AnalyticsSections.SETTINGS_CUSTOMIZE_PROFILE,source:k})}),[k]);var D=void 0===s?n.getAvatarURL(null==T?void 0:T.id,80,!0):s,j=null!==(e=(0,l.hex2int)((0,f.default)(D,G.Colors.PRIMARY_DARK_530,f.ColorFormats.HEX)))&&void 0!==e?e:0,F=A.default.canUsePremiumProfileCustomization(n),H=void 0===s?null!=(null==U?void 0:U.avatar):null!=s,Y=void 0===y?null!=(null==U?void 0:U.banner):null!=y;return null==T?null:i.createElement(i.Fragment,null,W("div",{className:B.default.notice
},void 0,W(O.default,{className:B.default.warningCircleIcon}),W(h.default,{},void 0,w.default.Messages.CHANGE_IDENTITY_USER_PROFILE_HELP.format({onUserProfileClick:function(){(0,C.closeGuildIdentitySettings)();o.default.open(G.UserSettingsSections.PROFILE_CUSTOMIZATION)}}))),W(c.default,{title:W("span",{className:B.default.title},void 0,w.default.Messages.CHANGE_IDENTITY_SERVER_PROFILE),description:W(h.default,{className:B.default.guildInfo},void 0,W(N.default,{className:B.default.guildIconInline,guild:T,size:N.default.Sizes.MINI},"guild-icon"),W("span",{},void 0,T.name)),previewTitle:w.default.Messages.CHANGE_IDENTITY_PREVIEW,customizationSections:[W(L.default,{username:n.toString(),pendingNick:m,currentNick:null==U?void 0:U.nick,guild:T},"nick"),F?null:W(V,{onUpsellClick:function(){return K({object:G.AnalyticsObjects.BUTTON_CTA})}}),W(g.default,{sectionTitle:i.createElement(i.Fragment,null,w.default.Messages.USER_SETTINGS_AVATAR,W(P.default,{
text:w.default.Messages.PROFILE_CUSTOMIZATION_NITRO_ICON_TOOLTIP},void 0,(function(e){return i.createElement(b.default,x({},e,{className:B.default.nitroWheel}))}))),showRemoveAvatarButton:H,onAvatarChange:C.setPendingAvatar,errors:M.avatar,guildId:T.id,disabled:!F},"avatar"),W(E.default,{sectionTitle:w.default.Messages.USER_SETTINGS_PROFILE_BANNER,canUsePremiumCustomization:F,showRemoveBannerButton:Y,errors:M.banner,upsellButton:null,onBannerChange:C.setPendingBanner,guildId:null==T?void 0:T.id,disabled:!F},"banner"),W(v.default,{placeholder:w.default.Messages.CHANGE_IDENTITY_BIO_PLACEHOLDER,sectionTitle:i.createElement(i.Fragment,null,w.default.Messages.USER_PROFILE_ABOUT_ME,W(P.default,{text:w.default.Messages.PROFILE_CUSTOMIZATION_NITRO_ICON_TOOLTIP},void 0,(function(e){return i.createElement(b.default,x({},e,{className:B.default.nitroWheel}))}))),onBioChange:function(e){(0,C.setPendingBio)(e);(0,C.setDisableSubmit)(null!=e&&e.length>G.BIO_MAX_LENGTH)},errors:M.bio,pendingBio:S,
currentBio:(null==U?void 0:U.bio)||"",disabled:!F},"about")],profilePreview:W(p.default,{user:n,guild:T,canUsePremiumCustomization:F,bannerColor:null!==(t=n.accentColor)&&void 0!==t?t:j,onAvatarChange:C.setPendingAvatar,onBannerChange:C.setPendingBanner,onUpsellClick:K,pendingBanner:y,pendingBio:S,pendingAvatar:s,pendingNickname:m,activityName:w.default.Messages.CHANGE_IDENTITY_SERVER_PROFILE,activityCharacter:"phibi",openPremiumSettings:z})}))}function X(){var e=(0,u.useStateFromStores)([m.default],(function(){return m.default.theme}));return W(s.default,{theme:e,section:$,sections:[{section:$,label:null,element:Z,notice:{store:R.default,element:k.default}}],onClose:C.closeGuildIdentitySettings,hideSidebar:!0})}X.displayName="GuildIdentitySettings"},65139:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=E;!function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e)
;var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}r.default=e;n&&n.set(e,r)}(n(667294));var r,i=n(536211),a=p(n(456701)),l=p(n(689389)),u=p(n(279950)),o=n(688388),s=n(799393),d=n(770348),f=p(n(247001)),c=p(n(514049));function p(e){return e&&e.__esModule?e:{default:e}}function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function g(e,t,n,i){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,l=arguments.length-3;if(t||0===l||(t={children:void 0}),1===l)t.children=i;else if(l>1){for(var u=new Array(l),o=0;o<l;o++)u[o]=arguments[o+3];t.children=u}if(t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,
ref:null,props:t,_owner:null}}function E(e){var t=e.errors,n=e.pendingNick,r=e.currentNick,p=e.username,v=e.guild,E=null!=n?n:r,_=(0,i.useStateFromStores)([l.default],(function(){return l.default.can(d.Permissions.CHANGE_NICKNAME,v)||l.default.can(d.Permissions.MANAGE_NICKNAMES,v)}));return g(a.default,{title:f.default.Messages.NICKNAME,errors:t},void 0,g(u.default,{value:null!=E?E:"",placeholder:p,maxLength:d.USERNAME_MAX_LENGTH,onChange:function(e){var t=e===r?void 0:e;(0,s.setPendingNickname)(t)},disabled:!_}),!_&&g(o.FormText,{className:c.default.nicknameDisabled,type:o.FormText.Types.DESCRIPTION},void 0,f.default.Messages.CHANGE_IDENTITY_NICKNAME_PERMISSIONS_DISABLED))}E.displayName="NicknameSection"}}]);
//# sourceMappingURL=9bf01e8a6efb4ec0716a.js.map