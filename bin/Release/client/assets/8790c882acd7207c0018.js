"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[99638],{334007:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.ConflictError=void 0;t.sync=function(e,t,n){return p.apply(this,arguments)};var r=i(n(636602)),u=i(n(791548)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var r={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=u?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(r,l,o):r[l]=e[l]}r.default=e;n&&n.set(e,r);return r}(n(324033)),o=n(770348);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n,r,u,l,o){try{var a=e[l](o),i=a.value}catch(e){n(e);return}
a.done?t(i):Promise.resolve(i).then(r,u)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,u){var l=e.apply(t,n);function o(e){s(l,r,u,o,a,"next",e)}function a(e){s(l,r,u,o,a,"throw",e)}o(void 0)}))}}var d=new u.default("CloudSync"),f=function(e){this.message=e};t.ConflictError=f;function p(){return(p=c(regeneratorRuntime.mark((function e(t,n,u){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0===u&&(u=null);r.default.dispatch({type:o.ActionTypes.GAME_CLOUD_SYNC_START,applicationId:t,branchId:n});e.prev=2;e.next=5;return l.syncApplication(t,n,u);case 5:if((a=e.sent).type!==o.CloudSyncResultTypes.CONFLICT){e.next=11;break}r.default.dispatch({type:o.ActionTypes.GAME_CLOUD_SYNC_CONFLICT,applicationId:t,branchId:n,next:a.next,remote:a.remote});throw new f("Conflict in cloud sync.");case 11:a.type!==o.CloudSyncResultTypes.PULL&&a.type!==o.CloudSyncResultTypes.PUSH||d.info("Sync complete",a);case 12:e.next=21
;break;case 14:e.prev=14;e.t0=e.catch(2);if(!(e.t0 instanceof f)){e.next=18;break}throw e.t0;case 18:r.default.dispatch({type:o.ActionTypes.GAME_CLOUD_SYNC_ERROR,applicationId:t,branchId:n});d.error("Failed to cloud sync:",e.t0);throw new Error("Failed to cloud sync.");case 21:r.default.dispatch({type:o.ActionTypes.GAME_CLOUD_SYNC_COMPLETE,applicationId:t,branchId:n});return e.abrupt("return",a);case 23:case"end":return e.stop()}}),e,null,[[2,14]])})))).apply(this,arguments)}},505437:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var r,u=(r=n(636602))&&r.__esModule?r:{default:r},l=n(770348);var o={updateChannelDimensions:function(e,t,n,r,o){u.default.wait((function(){u.default.dispatch({type:l.ActionTypes.UPDATE_CHANNEL_DIMENSIONS,channelId:e,scrollTop:t,scrollHeight:n,offsetHeight:r});null!=o&&o()}))},updateChannelListScroll:function(e,t){u.default.dirtyDispatch({type:l.ActionTypes.UPDATE_CHANNEL_LIST_DIMENSIONS,guildId:e,scrollTop:t})},
channelListScrollTo:function(e,t){u.default.dirtyDispatch({type:l.ActionTypes.UPDATE_CHANNEL_LIST_DIMENSIONS,guildId:e,scrollTo:t})},clearChannelListScrollTo:function(e){u.default.dirtyDispatch({type:l.ActionTypes.UPDATE_CHANNEL_LIST_DIMENSIONS,guildId:e,scrollTo:null})},clearChannelDimensions:function(e,t){this.updateChannelDimensions(e,null,null,null,t)},updateGuildListScrollTo:function(e){u.default.dirtyDispatch({type:l.ActionTypes.UPDATE_GUILD_LIST_DIMENSIONS,scrollTop:e})}};t.default=o},107974:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.playApplication=M;var r,u=O(n(667294)),l=T(n(730381)),o=T(n(536211)),a=O(n(334007)),i=T(n(234161)),s=T(n(288356)),c=T(n(223367)),d=T(n(956117)),f=T(n(530250)),p=T(n(662197)),y=n(3400),h=n(194322),_=T(n(308920)),v=n(770348),C=T(n(247001)),m=T(n(184804)),A=T(n(380203));function T(e){return e&&e.__esModule?e:{default:e}}function R(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(R=function(e){
return e?n:t})(e)}function O(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=R(t);if(n&&n.has(e))return n.get(e);var r={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=u?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(r,l,o):r[l]=e[l]}r.default=e;n&&n.set(e,r);return r}function E(){E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};return E.apply(this,arguments)}function g(e,t,n,r,u,l,o){try{var a=e[l](o),i=a.value}catch(e){n(e);return}a.done?t(i):Promise.resolve(i).then(r,u)}function I(e){return function(){var t=this,n=arguments;return new Promise((function(r,u){var l=e.apply(t,n);function o(e){g(l,r,u,o,a,"next",e)}function a(e){g(l,r,u,o,a,"throw",e)}o(void 0)}))}}
function S(e,t,n,u){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var l=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=u;else if(o>1){for(var a=new Array(o),i=0;i<o;i++)a[i]=arguments[i+3];t.children=a}if(t&&l)for(var s in l)void 0===t[s]&&(t[s]=l[s]);else t||(t=l||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function N(e,t){N=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return N(e,t)}var b=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;N(e,t)}(t,e);function t(){for(var t,n=arguments.length,r=new Array(n),u=0;u<n;u++)r[u]=arguments[u];(t=e.call.apply(e,[this].concat(r))||this).onClose=function(){t.props.onClose()};t.handlePlay=function(e,n){void 0===e&&(e=!0);void 0===n&&(n=null);var r=t.props,u=r.libraryApplication,l=r.analyticsParams;t.onClose();M(u.id,u,{analyticsParams:l,cloudSync:e,cloudSyncForceHash:n})}
;t.handleChooseDownload=function(){var e=t.props.cloudSyncState;e.type===v.CloudSyncStateTypes.CONFLICT&&t.handlePlay(!0,e.remote.hash)};t.handleChooseUpload=function(){var e=t.props.cloudSyncState;e.type===v.CloudSyncStateTypes.CONFLICT&&t.handlePlay(!0,e.next.hash)};return t}var n=t.prototype;n.renderConflictButton=function(e,t,n,r){return S(d.default,{className:m.default.conflictButton,innerClassName:m.default.conflictButtonInner,onClick:r},void 0,S("div",{className:n}),S("div",{className:m.default.buttonBody},void 0,S("div",{className:m.default.conflictTitle},void 0,e),S("div",{},void 0,C.default.Messages.CLOUD_SYNC_MODAL_CONFLICT_LAST_MODIFIED),S("div",{className:m.default.timestamp},void 0,(0,l.default)(t).calendar())))};n.renderError=function(){var e=this,t=this.props.application;return S(u.Fragment,{},void 0,S(y.ModalContent,{},void 0,S(f.default,{justify:f.default.Justify.CENTER},void 0,S("div",{className:m.default.errorArt})),S("div",{className:m.default.description
},void 0,C.default.Messages.CLOUD_SYNC_MODAL_ERROR_DESCRIPTION.format({applicationName:t.name}))),S(y.ModalFooter,{},void 0,S(f.default,{justify:f.default.Justify.BETWEEN},void 0,S(d.default,{className:m.default.linkButton,size:m.default.linkButtonSize,look:d.default.Looks.LINK,color:d.default.Colors.PRIMARY,onClick:this.onClose},void 0,C.default.Messages.CANCEL),S(f.default,{direction:f.default.Direction.HORIZONTAL,justify:f.default.Justify.END},void 0,S(d.default,{look:d.default.Looks.LINK,color:d.default.Colors.PRIMARY,onClick:function(){return e.handlePlay()},className:m.default.retryButton},void 0,C.default.Messages.RETRY),S(d.default,{onClick:function(){return e.handlePlay(!1)}},void 0,C.default.Messages.GAME_ACTION_BUTTON_PLAY)))))};n.renderConflict=function(){var e=this.props,t=e.application,n=e.cloudSyncState;if(n.type!==v.CloudSyncStateTypes.CONFLICT)throw new Error("Cannot render conflict for non conflict type");return S(y.ModalContent,{className:A.default.marginBottom20
},void 0,S("div",{className:m.default.description},void 0,C.default.Messages.CLOUD_SYNC_MODAL_CONFLICT_DESCRIPTION.format({applicationName:t.name})),this.renderConflictButton(C.default.Messages.CLOUD_SYNC_MODAL_CONFLICT_CHOICE_DOWNLOAD,n.remote.timestamp,m.default.conflictDownloadArt,this.handleChooseDownload),S(f.default,{className:m.default.choiceWrapper,align:f.default.Align.CENTER},void 0,S("div",{className:m.default.choiceLine}),S("div",{className:m.default.choiceTitle},void 0,C.default.Messages.CLOUD_SYNC_MODAL_OR),S("div",{className:m.default.choiceLine})),this.renderConflictButton(C.default.Messages.CLOUD_SYNC_MODAL_CONFLICT_CHOICE_UPLOAD,n.next.timestamp,m.default.conflictUploadArt,this.handleChooseUpload))};n.render=function(){var e=this.props,t=e.cloudSyncState,n=e.transitionState,r=t.type===v.CloudSyncStateTypes.CONFLICT?C.default.Messages.CLOUD_SYNC_MODAL_CONFLICT_HEADER:C.default.Messages.CLOUD_SYNC_MODAL_ERROR_HEADER;return S(y.ModalRoot,{transitionState:n,
className:m.default.modal,"aria-label":r},void 0,S(y.ModalHeader,{separator:!1},void 0,S(y.ModalCloseButton,{className:m.default.closeButton,onClick:this.onClose}),S(p.default,{tag:p.default.Tags.H2,className:A.default.marginReset},void 0,r)),t.type===v.CloudSyncStateTypes.CONFLICT?this.renderConflict():this.renderError())};return t}(u.PureComponent);b.displayName="CloudSyncResolutionModal";var L=o.default.connectStores([c.default,s.default],(function(e){var t=e.libraryApplication,n=e.branchId;return{cloudSyncState:c.default.getState(t.id,n),application:s.default.getGame(t.id)}}))(b);function M(e,t,n){return P.apply(this,arguments)}function P(){return(P=I(regeneratorRuntime.mark((function e(t,n,r){var l,o,c,d,f,p,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(l=s.default.getGame(t))){e.next=3;break}return e.abrupt("return");case 3:o=r.cloudSync,c=void 0===o||o,d=r.cloudSyncForceHash,f=void 0===d?null:d,p=r.analyticsParams;if(!c||null==n){
e.next=15;break}y=n.branchId;e.prev=6;e.next=9;return a.sync(n.id,y,f);case 9:e.next=15;break;case 11:e.prev=11;e.t0=e.catch(6);(0,h.openModal)((function(e){return u.createElement(L,E({libraryApplication:n,analyticsParams:p,branchId:y},e))}));return e.abrupt("return");case 15:_.default.track(v.AnalyticEvents.APPLICATION_OPENED,E({application_id:l.id,application_name:l.name,type:v.AnalyticsGameOpenTypes.LAUNCH,distributor:null!=n?n.getDistributor():null},p));return e.abrupt("return",i.default.launch(l.id,null==n?void 0:n.branchId));case 17:case"end":return e.stop()}}),e,null,[[6,11]])})))).apply(this,arguments)}},221107:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.QUICKSWITCHER_SHOW=void 0;var r=n(835282),u=o(n(423046)),l=o(n(122913));function o(e){return e&&e.__esModule?e:{default:e}}var a={binds:["mod+k","mod+t"],comboKeysBindGlobal:!0,action:function(){if(u.default.isGuest())return!1;l.default.hasLayers()||(0,r.show)();return!1}};t.QUICKSWITCHER_SHOW=a},
497677:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=t.TOGGLE_HOTKEYS=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var a=u?Object.getOwnPropertyDescriptor(e,l):null;a&&(a.get||a.set)?Object.defineProperty(r,l,a):r[l]=e[l]}r.default=e;n&&n.set(e,r);return r}(n(499816)),u=n(194322),l=n(140020);function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}var a={binds:["mod+/","mod+shift+/"],comboKeysBindGlobal:!0,action:function(){(0,u.hasModalOpen)(l.KEYBOARD_SHORTCUT_MODAL_KEY)?r.hide():r.show();return!1}};t.TOGGLE_HOTKEYS=a;var i={TOGGLE_HOTKEYS:a};t.default=i},925689:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0})
;t.default=void 0;var r=R(n(496486)),u=R(n(120053)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=T(t);if(n&&n.has(e))return n.get(e);var r={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=u?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(r,l,o):r[l]=e[l]}r.default=e;n&&n.set(e,r);return r}(n(567186)),o=R(n(539563)),a=R(n(676614)),i=R(n(644263)),s=R(n(126208)),c=n(517286),d=R(n(290629)),f=R(n(728429)),p=R(n(424956)),y=n(71246),h=R(n(895201)),_=R(n(608417)),v=R(n(942192)),C=R(n(74978)),m=n(176548),A=n(770348);function T(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(T=function(e){return e?n:t})(e)}function R(e){return e&&e.__esModule?e:{default:e}}function O(){O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]
;for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};return O.apply(this,arguments)}function E(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function I(e,t){return(0,
r.default)(e).sort(C.default).take(t).value()}var S=Object.freeze({});function N(e,t){void 0===e&&(e=0);return 1e3*e*(null!=t?t:1)}function b(e,t){if(!t.frecencyBoosters)return{};var n=s.default.getFrequently(),r=n.reduce((function(e,t){var n=t.id,r=s.default.getScore(n);return r>e?r:e}),0),u=[];switch(e){case m.AutocompleterResultTypes.GUILD:u=n.filter((function(e){return e instanceof o.default}));break;case m.AutocompleterResultTypes.USER:u=n.filter((function(e){return e instanceof l.default&&e.type===A.ChannelTypes.DM}));break;case m.AutocompleterResultTypes.GROUP_DM:u=n.filter((function(e){return e instanceof l.default&&e.isMultiUserDM()}));break;case m.AutocompleterResultTypes.TEXT_CHANNEL:u=n.filter((function(e){return e instanceof l.default&&(0,l.isGuildSelectableChannelType)(e.type)}));break;case m.AutocompleterResultTypes.VOICE_CHANNEL:u=n.filter((function(e){return e instanceof l.default&&e.isVocal()}))}for(var a,c={},f=E(u);!(a=f()).done;){
var p=a.value,y=p.id,h=s.default.getScore(y);if(e===m.AutocompleterResultTypes.USER&&p instanceof l.default){if(p.type===A.ChannelTypes.DM)c[y=p.getRecipientId()]=1+h/r;else if(p.type===A.ChannelTypes.GROUP_DM)for(var _,v=p.recipients.length,C=E(p.recipients);!(_=C()).done;){c[_.value]=1+h/r*(1/v)}}else c[y]=1+h/r}for(var T,R=E(d.default.getFriendIDs());!(T=R()).done;){var O,g=T.value;c[g]=(null!==(O=c[g])&&void 0!==O?O:1)+.2}for(var I,S=E(i.default.getDMUserIds());!(I=S()).done;){var N,b=I.value;c[b]=(null!==(N=c[b])&&void 0!==N?N:1)+.1}return c}var L=function(){function e(e,t,n,u){var l=this;void 0===n&&(n=100);void 0===u&&(u=S);this.query="";this.options=S;this.results=[];this._userResults=[];this._groupDMResults=[];this._textChannelResults=[];this._voiceChannelResults=[];this._guildResults=[];this._applicationResults=[];this._linkResults=[];this._userBlacklist=null;this.mapUserResult=function(e){var t=e.user,n=e.id,r=e.score,u=e.comparator;null==t&&(t=f.default.getUser(n))
;return null==t?null:{type:m.AutocompleterResultTypes.USER,record:t,score:N(r),comparator:u}};this.parseUserResults=function(e){var t=e.results;if(l._include(m.AutocompleterResultTypes.USER)){l._userResults=t.map(l.mapUserResult).filter(y.isNotNullish);l._userResults.length>l._limit&&(l._userResults.length=l._limit);l.updateAllResults()}};this.updateAllResults=function(){clearTimeout(l._asyncTimeout);l.results=(0,r.default)([].concat(l._userResults,l._groupDMResults,l._textChannelResults,l._voiceChannelResults,l._guildResults,l._linkResults)).uniqBy((function(e){return e.type+"-"+e.record.id})).sort(C.default).value();l.onResultsChange(l.results,l.query)};this.onResultsChange=e;this.setOptions(u,!0);this._limit=n;this.userSearchContext=v.default.getSearchContext(this.parseUserResults,n);this.setResultTypes(t)}var t=e.prototype;t.setLimit=function(e){var t=this.userSearchContext;this._limit=e;null!=t&&t.setLimit(e)
;this._userResults.length>this._limit&&(this._userResults.length=this._limit);this._groupDMResults.length>this._limit&&(this._groupDMResults.length=this._limit);this._textChannelResults.length>this._limit&&(this._textChannelResults.length=this._limit);this._voiceChannelResults.length>this._limit&&(this._voiceChannelResults.length=this._limit);this._guildResults.length>this._limit&&(this._guildResults.length=this._limit);this._applicationResults.length>this._limit&&(this._applicationResults.length=this._limit);this._linkResults.length>this._limit&&(this._linkResults.length=this._limit)};t.setResultTypes=function(e){this.resultTypes=null!=e?new Set(e):null;this._userResults=this._include(m.AutocompleterResultTypes.USER)?this._userResults:[];this._groupDMResults=this._include(m.AutocompleterResultTypes.GROUP_DM)?this._groupDMResults:[];this._textChannelResults=this._include(m.AutocompleterResultTypes.TEXT_CHANNEL)?this._textChannelResults:[]
;this._voiceChannelResults=this._include(m.AutocompleterResultTypes.VOICE_CHANNEL)?this._voiceChannelResults:[];this._guildResults=this._include(m.AutocompleterResultTypes.GUILD)?this._guildResults:[];this._applicationResults=this._include(m.AutocompleterResultTypes.APPLICATION)?this._applicationResults:[];this._linkResults=this._include(m.AutocompleterResultTypes.LINK)?this._linkResults:[]};t._include=function(e){return null==this.resultTypes||this.resultTypes.has(e)};t._isAsyncSearch=function(){return this._include(m.AutocompleterResultTypes.USER)};t.setOptions=function(e,t){void 0===t&&(t=!1);this.options=t?O({},this.options,{},e):e;null!=this.options.blacklist?this._userBlacklist=Array.from(this.options.blacklist).map((function(e){return e.startsWith("user:")?e.replace("user:",""):""})).filter((function(e){return""!==e})):this._userBlacklist=null};t.search=function(e,t){this.query=e;if(""!==e.trim()){this.queryUsers(e,t,this._limit)
;this._groupDMResults=this.queryGroupDMs(e,this._limit);this._textChannelResults=this.queryTextChannels(e,this._limit);this._voiceChannelResults=this.queryVoiceChannels(e,this._limit);this._guildResults=this.queryGuilds(e,this._limit);this._applicationResults=this.queryApplications(e,this._limit);this._linkResults=this.queryLink(e,this._limit);if(this._isAsyncSearch()){clearTimeout(this._asyncTimeout);this._asyncTimeout=setTimeout(this.updateAllResults,300)}else this.updateAllResults()}else{this.clear();this.updateAllResults()}};t.clear=function(){var e=this.userSearchContext;null!=e&&e.clearQuery();this.results=[];this._userResults=[];this._groupDMResults=[];this._textChannelResults=[];this._voiceChannelResults=[];this._guildResults=[];this._applicationResults=[];this._linkResults=[]};t.destroy=function(){var e=this.userSearchContext;if(null!=e){e.destroy();this.userSearchContext=null}};t.queryTextChannels=function(e,t){
if(!this._include(m.AutocompleterResultTypes.TEXT_CHANNEL))return[];var n=b(m.AutocompleterResultTypes.TEXT_CHANNEL,this.options),r=this.options.blacklist,u=null!=r?function(e){return!r.has("channel:"+e.id)}:void 0;return I(p.default.queryChannels(e,null,1/0,!0,u).map((function(e){var t=e.channel,r=e.score,u=e.comparator;return{type:m.AutocompleterResultTypes.TEXT_CHANNEL,record:t,score:N(r,n[t.id]),comparator:u}})),t)};t.queryVoiceChannels=function(e,t){if(!this._include(m.AutocompleterResultTypes.VOICE_CHANNEL))return[];var n=this.options.voiceChannelGuildFilter;if(void 0===n)return[];var r=b(m.AutocompleterResultTypes.VOICE_CHANNEL,this.options);return I(p.default.queryChannels(e,n,1/0,!0,(function(){return!0}),c.GUILD_VOCAL_CHANNELS_KEY).map((function(e){var t=e.channel,n=e.score,u=e.comparator;return{type:m.AutocompleterResultTypes.VOICE_CHANNEL,record:t,score:N(n,r[t.id]),comparator:u}})),t)};t.queryGuilds=function(e,t){if(!this._include(m.AutocompleterResultTypes.GUILD))return[]
;var n=b(m.AutocompleterResultTypes.GUILD,this.options),r=this.options.blacklist,u=null!=r?function(e){return!r.has("guild:"+e.id)}:void 0;return I(p.default.queryGuilds(e,1/0,!0,u).map((function(e){var t=e.guild,r=e.score,u=e.comparator;return{type:m.AutocompleterResultTypes.GUILD,record:t,score:N(r,n[t.id]),comparator:u}})),t)};t.queryUsers=function(e,t,n){var r=this.userSearchContext;if(null!=r&&this._include(m.AutocompleterResultTypes.USER)){var u=this.options.userFilters;void 0!==t&&h.default.requestMembers(t,e,100);r.setLimit(n);r.setQuery(e,u,this._userBlacklist,b(m.AutocompleterResultTypes.USER,this.options))}};t.queryGroupDMs=function(e,t){if(!this._include(m.AutocompleterResultTypes.GROUP_DM))return[];var n=this.options.blacklist,r=b(m.AutocompleterResultTypes.GROUP_DM,this.options),u=null!=n?function(e){return!n.has("channel:"+e.id)}:void 0;return I(p.default.queryGroupDMs(e,1/0,!0,u).map((function(e){var t=e.channel,n=e.score,u=e.comparator;return{
type:m.AutocompleterResultTypes.GROUP_DM,record:t,score:N(n,r[t.id]),comparator:u}})),t)};t.queryApplications=function(e,t){return this._include(m.AutocompleterResultTypes.APPLICATION)?I(p.default.queryApplications(e,1/0,!0).map((function(e){var t=e.application,n=e.score,r=e.comparator;return{type:m.AutocompleterResultTypes.APPLICATION,record:t,score:N(n),comparator:r}})),t):[]};t.queryLink=function(e,t){if(!this._include(m.AutocompleterResultTypes.LINK))return[];var n,r=u.default.sanitizeUrl(e);try{n=new URL(r)}catch(e){return[]}var l=n,o=l.pathname,i=l.hostname,s=void 0===i?"":i,c=l.host,d=_.default.isDiscordHostname(s)||window.location.host===c;return null!==o&&d&&_.default.isAppRoute(o)?I([{type:m.AutocompleterResultTypes.LINK,record:a.default.fromPath(o),score:1}],t):[]};return e}();t.default=L},176548:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.HeaderRecord=t.FindResultDirections=t.AutocompleterResultTypes=t.AutocompleterQuerySymbols=void 0
;var r,u=(r=n(213192))&&r.__esModule?r:{default:r};t.HeaderRecord=function(e){this.id=e;this.text=e};var l,o,a=(0,u.default)({UP:null,DOWN:null});t.FindResultDirections=a;t.AutocompleterResultTypes=l;!function(e){e.GUILD="GUILD";e.TEXT_CHANNEL="TEXT_CHANNEL";e.GROUP_DM="GROUP_DM";e.VOICE_CHANNEL="VOICE_CHANNEL";e.USER="USER";e.HEADER="HEADER";e.APPLICATION="APPLICATION";e.LINK="LINK"}(l||(t.AutocompleterResultTypes=l={}));t.AutocompleterQuerySymbols=o;!function(e){e.USER="@";e.TEXT_CHANNEL="#";e.VOICE_CHANNEL="!";e.GUILD="*";e.APPLICATION="$"}(o||(t.AutocompleterQuerySymbols=o={}))},22324:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.createHeaderResult=function(e){return{type:r.AutocompleterResultTypes.HEADER,record:new r.HeaderRecord(e),score:0}};var r=n(176548)},10018:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(t,n,u,l){var o=u.length,a=l,i=n;if(0===o)return 0;if(null==a)a=i;else if(a===i)return i
;if((i+=t===r.FindResultDirections.UP?-1:1)<0||i>=o)return e(t,i<0?o:-1,u,a);if(u[i].type===r.AutocompleterResultTypes.HEADER)return e(t,i,u,a);return i};var r=n(176548)},707791:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r={createHeaderResult:!0,findNextSelectedResult:!0,sortByMatchScore:!0};Object.defineProperty(t,"createHeaderResult",{enumerable:!0,get:function(){return o.createHeaderResult}});t.default=void 0;Object.defineProperty(t,"findNextSelectedResult",{enumerable:!0,get:function(){return a.default}});Object.defineProperty(t,"sortByMatchScore",{enumerable:!0,get:function(){return i.default}});var u=s(n(925689)),l=n(176548);Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))}));var o=n(22324),a=s(n(10018)),i=s(n(74978));function s(e){return e&&e.__esModule?e:{default:e}}var c=u.default;t.default=c},
749666:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=t.PRETTY_KEYS=void 0;!function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var r={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=u?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(r,l,o):r[l]=e[l]}r.default=e;n&&n.set(e,r)}(n(667294));var r,u=a(n(294184)),l=a(n(14096)),o=a(n(661505));function a(e){return e&&e.__esModule?e:{default:e}}function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}function s(e,t,n,u){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var l=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=u;else if(o>1){
for(var a=new Array(o),i=0;i<o;i++)a[i]=arguments[i+3];t.children=a}if(t&&l)for(var s in l)void 0===t[s]&&(t[s]=l[s]);else t||(t=l||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var c="up",d="right",f="down",p="left",y=s("g",{fill:"#FFFFFF"},void 0,s("polygon",{transform:"translate(5.025000, 5.000000) scale(1, -1) translate(-5.025000, -5.000000) ",points:"4.16666667 10 4.16666672 3.33333333 1.25 6.25 0.05 5 5.00000005 0 9.99999967 5 8.75 6.25 5.83333338 3.33333333 5.83333333 10"})),h=function(e){var t=e.direction,n=void 0===t?c:t;return s("svg",{width:"10",height:"10",xmlns:"http://www.w3.org/2000/svg",className:(0,u.default)(o.default.bindArrow,o.default[n])},void 0,y)};h.displayName="ArrowSVG";var _={mod:function(){return l.default.modKey},alt:function(){return l.default.altKey},up:function(){return s(h,{direction:c})},down:function(){return s(h,{direction:f})},left:function(){return s(h,{direction:p})},right:function(){return s(h,{direction:d})
},pageup:function(){return"page up"},pagedown:function(){return"page down"},"any-character":function(){return"any key"},plus:function(){return"+"},return:function(){return l.default.returnKey}};t.PRETTY_KEYS=_;var v=function(e){var t=e.shortcut,n=e.className;return s("div",{className:(0,u.default)(o.default.keybindShortcut,n)},void 0,t.split("+").map((function(e){return _[e]?_[e]():e})).map((function(e,t){return s("span",{},t,e)})))};v.displayName="KeyboardShortcut";var C=v;t.default=C},499816:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.hide=function(){u.default.dispatch({type:l.ActionTypes.HIDE_KEYBOARD_SHORTCUTS})};t.show=function(){u.default.dispatch({type:l.ActionTypes.SHOW_KEYBOARD_SHORTCUTS})};var r,u=(r=n(636602))&&r.__esModule?r:{default:r},l=n(770348)},140020:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.KEYBOARD_SHORTCUT_MODAL_KEY=void 0;t.KEYBOARD_SHORTCUT_MODAL_KEY="KEYBOARD_SHORTCUT_MODAL_KEY"},835282:(e,t,n)=>{
Object.defineProperty(t,"__esModule",{value:!0});t.getQuickSwitcherOptions=S;t.hide=P;t.search=function(e){u.default.dispatch(R({type:A.ActionTypes.QUICKSWITCHER_SEARCH},S(e)))};t.selectResult=function(e){u.default.dispatch({type:A.ActionTypes.QUICKSWITCHER_SELECT,selectedIndex:e})};t.show=M;t.switchToResult=function(e){L();b(A.AnalyticEvents.QUICKSWITCHER_RESULT_SELECTED,e);var t,n=e.type,r=e.record,f={page:A.AnalyticsPages.QUICK_SWITCHER};switch(n){case i.AutocompleterResultTypes.GUILD:var _=h.default.getChannelId(r.id);null!=_&&(0,c.transitionTo)(A.Routes.CHANNEL(r.id,_),{state:{analyticsSource:f}});break;case i.AutocompleterResultTypes.TEXT_CHANNEL:null!=(t=p.default.getChannel(r.id))&&(0,d.transitionToChannel)(t.id,{state:{analyticsSource:f}});break;case i.AutocompleterResultTypes.VOICE_CHANNEL:null!=(t=p.default.getChannel(r.id))&&a.default.selectVoiceChannel(r.id);break;case i.AutocompleterResultTypes.USER:l.default.openPrivateChannel([r.id])
;o.default.channelListScrollTo(A.ME,r.id);break;case i.AutocompleterResultTypes.GROUP_DM:(0,c.transitionToGuild)(A.ME,r.id);o.default.channelListScrollTo(A.ME,r.id);break;case i.AutocompleterResultTypes.APPLICATION:var v=y.default.getActiveLibraryApplication(r.id);O(r.id,v,{analyticsParams:{source:A.AnalyticsLocations.QUICK_SWITCHER,location:A.AnalyticsLocations.QUICK_SWITCHER}});break;case i.AutocompleterResultTypes.LINK:(0,s.default)(r.path)}u.default.dispatch({type:A.ActionTypes.QUICKSWITCHER_SWITCH_TO,result:e})};t.toggle=function(e){void 0===e&&(e="KEYBIND");m.default.isOpen()?P():M(e)};t.trackClose=b;t.trackOpen=N;var r,u=T(n(636602)),l=T(n(709403)),o=T(n(505437)),a=T(n(136873)),i=n(707791),s=T(n(187295)),c=n(139982),d=n(391869),f=T(n(567186)),p=T(n(644263)),y=T(n(191839)),h=T(n(211136)),_=T(n(790597)),v=T(n(308920)),C=T(n(424115)),m=T(n(523946)),A=n(770348);function T(e){return e&&e.__esModule?e:{default:e}}function R(){R=Object.assign||function(e){
for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};return R.apply(this,arguments)}var O=function(){return Promise.resolve()},E=n(409873);O=E.playApplication;var g=Object.freeze(((r={})[i.AutocompleterQuerySymbols.USER]=i.AutocompleterResultTypes.USER,r[i.AutocompleterQuerySymbols.TEXT_CHANNEL]=i.AutocompleterResultTypes.TEXT_CHANNEL,r[i.AutocompleterQuerySymbols.VOICE_CHANNEL]=i.AutocompleterResultTypes.VOICE_CHANNEL,r[i.AutocompleterQuerySymbols.GUILD]=i.AutocompleterResultTypes.GUILD,r[i.AutocompleterQuerySymbols.APPLICATION]=i.AutocompleterResultTypes.APPLICATION,r)),I=new RegExp("^"+i.AutocompleterQuerySymbols.USER+"|"+i.AutocompleterQuerySymbols.TEXT_CHANNEL+"|"+i.AutocompleterQuerySymbols.VOICE_CHANNEL+"|\\"+i.AutocompleterQuerySymbols.GUILD+"|\\"+i.AutocompleterQuerySymbols.APPLICATION);function S(e){var t=function(e){var t,n=e.charAt(0),r=null!==(t=g[n])&&void 0!==t?t:null
;return[e.replace(I,""),r]}(e);return{query:t[0],queryMode:t[1]}}function N(e){if(!m.default.isOpen()){var t,n=_.default.getGuildId(),r=h.default.getChannelId(n);if(null!=r){var u=p.default.getChannel(r);t=null!=u?u.type:null}v.default.track(A.AnalyticEvents.QUICKSWITCHER_OPENED,{source:e,current_guild_id:n,current_channel_id:r,current_channel_type:t})}}function b(e,t){var n=m.default.getProps(),r=n.results,u=n.queryMode,l=n.query,o=n.maxQueryLength,a=_.default.getGuildId(),s=h.default.getChannelId(a),c=r[(0,i.findNextSelectedResult)(i.FindResultDirections.DOWN,-1,r)],d=C.default.isEmail(l),y=C.default.isPhoneNumber(l),A=C.default.isUserTagLike(l),T={current_channel_id:s,current_guild_id:a,query_mode:null!=u?u:"GENERAL",query_length:l.length,max_query_length:o,is_email_like:d,is_phone_like:y,is_username_like:A,query:d||y||A?null:l,top_result_type:null!=c?c.type:null,top_result_score:null!=c?c.score:null,num_results_total:m.default.getResultTotals(),
num_results_users:m.default.getResultTotals(i.AutocompleterResultTypes.USER),num_results_text_channels:m.default.getResultTotals(i.AutocompleterResultTypes.TEXT_CHANNEL),num_results_voice_channels:m.default.getResultTotals(i.AutocompleterResultTypes.VOICE_CHANNEL),num_results_guilds:m.default.getResultTotals(i.AutocompleterResultTypes.GUILD),num_results_group_dms:m.default.getResultTotals(i.AutocompleterResultTypes.GROUP_DM)};if(null!=s){var R=p.default.getChannel(s);T.current_channel_type=null!=R?R.type:null}if(null!=t){var O=t.type,E=t.score,g=t.record;T.selected_type=O;T.selected_score=E;T.selected_index=r.indexOf(t);switch(O){case i.AutocompleterResultTypes.GUILD:T.selected_guild_id=g.id;break;case i.AutocompleterResultTypes.TEXT_CHANNEL:case i.AutocompleterResultTypes.VOICE_CHANNEL:g instanceof f.default&&(T.selected_guild_id=null!=g.guild_id?g.guild_id:null);T.selected_channel_id=g.id;break;case i.AutocompleterResultTypes.GROUP_DM:T.selected_channel_id=g.id;break
;case i.AutocompleterResultTypes.USER:T.selected_user_id=g.id}}v.default.track(e,T)}function L(){u.default.dispatch({type:A.ActionTypes.QUICKSWITCHER_HIDE})}function M(e,t){void 0===e&&(e="KEYBIND");void 0===t&&(t="");N(e);u.default.dispatch(R({type:A.ActionTypes.QUICKSWITCHER_SHOW},S(t)))}function P(){b(A.AnalyticEvents.QUICKSWITCHER_CLOSED);L()}},523946:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;t.generateResultFromId=F;var r,u=P(n(496486)),l=P(n(972247)),o=P(n(636602)),a=M(n(707791)),i=n(678928),s=P(n(19566)),c=n(567186),d=P(n(423046)),f=P(n(644263)),p=M(n(687549)),y=M(n(517286)),h=P(n(876874)),_=P(n(30098)),v=P(n(689389)),C=P(n(191391)),m=P(n(290629)),A=P(n(211136)),T=P(n(790597)),R=P(n(563621)),O=P(n(871778)),E=P(n(728429)),g=P(n(298698)),I=P(n(424956)),S=n(71246),N=n(770348),b=P(n(247001));function L(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(L=function(e){return e?n:t})(e)}function M(e,t){
if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=L(t);if(n&&n.has(e))return n.get(e);var r={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=u?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(r,l,o):r[l]=e[l]}r.default=e;n&&n.set(e,r);return r}function P(e){return e&&e.__esModule?e:{default:e}}function D(e,t){D=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return D(e,t)}var U,H="seenQSTutorial",w=0,k=!1,j=!1,G=null,W=[],x=null,K=0;function F(e){var t,n,r=f.default.getChannel(e);if(null==r)return null;switch(r.type){case N.ChannelTypes.DM:if(null!=G&&G!==a.AutocompleterResultTypes.USER)return null;n=a.AutocompleterResultTypes.USER;t=(0,i.computeChannelName)(r,E.default,m.default);return null==(r=E.default.getUser(r.getRecipientId()))?null:{type:n,record:r,score:0,comparator:t}
;case N.ChannelTypes.GROUP_DM:return null!=G&&G!==a.AutocompleterResultTypes.GROUP_DM?null:{type:n=a.AutocompleterResultTypes.GROUP_DM,record:r,score:0,comparator:t=(0,i.computeChannelName)(r,E.default,m.default)};default:return null!=G&&G!==a.AutocompleterResultTypes.TEXT_CHANNEL?null:{type:n=a.AutocompleterResultTypes.TEXT_CHANNEL,record:r,score:0,comparator:t=(0,i.computeChannelName)(r,E.default,m.default)}}}function Q(){var e=T.default.getGuildId()||void 0,t=A.default.getChannelId()||void 0,n=A.default.getLastSelectedChannelId()||void 0;switch(G){case a.AutocompleterResultTypes.USER:var r=d.default.getId();return I.default.getRecentlyTalked(t,100).filter((function(e){return e.user.id!==r})).map((function(e){var t=e.user,n=e.comparator,r=e.score;return{type:a.AutocompleterResultTypes.USER,record:t,score:r,comparator:n}}));case a.AutocompleterResultTypes.APPLICATION:return I.default.queryApplications("",100,!0).map((function(e){var t=e.application,n=e.score,r=e.comparator;return{
type:a.AutocompleterResultTypes.APPLICATION,record:t,score:n,comparator:r}}));case a.AutocompleterResultTypes.GUILD:return I.default.queryGuilds("",100,!0).map((function(e){var t=e.guild,n=e.score,r=e.comparator;return{type:a.AutocompleterResultTypes.GUILD,record:t,score:n,comparator:r}}));case a.AutocompleterResultTypes.TEXT_CHANNEL:return I.default.queryChannels("",T.default.getGuildId(),100,!0).map((function(e){var t=e.channel,n=e.score,r=e.comparator;return{type:a.AutocompleterResultTypes.TEXT_CHANNEL,record:t,score:n,comparator:r}}));case a.AutocompleterResultTypes.VOICE_CHANNEL:return I.default.queryChannels("",T.default.getGuildId(),100,!0,(function(){return!0}),y.GUILD_VOCAL_CHANNELS_KEY).map((function(e){var t=e.channel,n=e.score,r=e.comparator;return{type:a.AutocompleterResultTypes.TEXT_CHANNEL,record:t,score:n,comparator:r}}))}var l=[];if(n){var o=F(n)
;null!=o&&(o.type!==a.AutocompleterResultTypes.TEXT_CHANNEL&&o.type!==a.AutocompleterResultTypes.VOICE_CHANNEL||v.default.can(N.Permissions.VIEW_CHANNEL,o.record))&&l.push((0,a.createHeaderResult)(b.default.Messages.QUICKSWITCHER_LAST_CHANNEL),o)}var i=function(e){var t=[];p.default.getRecentlyEditedDrafts(p.DraftType.ChannelMessage).forEach((function(n){var r=n.channelId;if(!e(r)){var u=F(r);null!=u&&t.push(u)}}));return t}((function(e){return e===t||e===n}));if(i.length>0){var c;(c=l).push.apply(c,[(0,a.createHeaderResult)(b.default.Messages.QUICKSWITCHER_DRAFTS)].concat(i))}var h=(0,u.default)(f.default.getMutableGuildAndPrivateChannels()).values().concat(s.default.computeAllActiveJoinedThreads()).filter((function(e){var r=e.id;return r!==t&&r!==n&&C.default.getMentionCount(r)>0})).map((function(e){return F(e.id)})).filter(S.isNotNullish).value();if(h.length>0){l.push((0,a.createHeaderResult)(b.default.Messages.QUICKSWITCHER_MENTIONS));l=l.concat(h)}if(null!=e){
var _=y.default.getSelectableChannelIds(e).filter((function(e){var r=f.default.getChannel(e);return!(null==r||e===t||e===n||R.default.isChannelMuted(r.guild_id,e)||null!=r.parent_id&&R.default.isChannelMuted(r.guild_id,r.parent_id))&&C.default.hasRelevantUnread(r)})).map((function(e){return F(e)})).filter((function(e){return e}));Object.values(s.default.getActiveJoinedUnreadThreadsForGuild(e)).forEach((function(e){for(var t in e){var n=F(t);null!=n&&_.push(n)}}));if(_.length>0){l.push((0,a.createHeaderResult)(b.default.Messages.QUICKSWITCHER_UNREAD_CHANNELS));l=l.concat(_)}}return(0,u.default)(l).uniqBy((function(e){return e.record.id})).value()}function Y(e,t){if(e.length>0)switch(G){case a.AutocompleterResultTypes.USER:var n=_.default.getGuild(T.default.getGuildId());W=[(0,a.createHeaderResult)(null!=n?b.default.Messages.QUICKSWITCHER_QUERYMODE_USERS_IN_GUILD.format({name:n.name}):b.default.Messages.QUICKSWITCHER_QUERYMODE_USERS)].concat(e);break
;case a.AutocompleterResultTypes.TEXT_CHANNEL:W=[(0,a.createHeaderResult)(b.default.Messages.QUICKSWITCHER_QUERYMODE_TEXT_CHANNELS)].concat(e);break;case a.AutocompleterResultTypes.VOICE_CHANNEL:W=[(0,a.createHeaderResult)(b.default.Messages.QUICKSWITCHER_QUERYMODE_VOICE_CHANNELS)].concat(e);break;case a.AutocompleterResultTypes.GUILD:W=[(0,a.createHeaderResult)(b.default.Messages.QUICKSWITCHER_QUERYMODE_GUILDS)].concat(e);break;case a.AutocompleterResultTypes.APPLICATION:W=[(0,a.createHeaderResult)(b.default.Messages.QUICKSWITCHER_QUERYMODE_APPLICATIONS)].concat(e);break;default:W=e}else W=e;if(t!==x){x=t;K=Math.max(t.length,K);w=(0,a.findNextSelectedResult)(a.FindResultDirections.DOWN,-1,W)}else{var r=W[w];null!=r&&r.type===a.AutocompleterResultTypes.HEADER&&(w=(0,a.findNextSelectedResult)(a.FindResultDirections.DOWN,w,W))}V.emitChange()}function q(e){var t,n=e.query,r=e.queryMode,u=T.default.getGuildId()||void 0,l=new Set(["user:"+d.default.getId()]);null!=u&&l.add("guild:"+u)
;U=null!==(t=U)&&void 0!==t?t:new a.default((function(e,t){return Y(""===t.trim()?Q():e,t)}),null,null!=r?100:5,{frecencyBoosters:!0,blacklist:l});x=null;K=n.length;G=r;U.search(n)}function B(){x=null;K=0;if(null!=U){U.destroy();U=null}}var V=new(function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;D(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}var n=t.prototype;n.initialize=function(){this.waitFor(h.default);this.syncWith([O.default],(function(){return!0}));k=l.default.get(H)||!1};n.isOpen=function(){return null!=U};n.getResultTotals=function(e){return null==U?0:null==e?U.results.reduce((function(e,t){return t.type!==a.AutocompleterResultTypes.HEADER?e+1:e}),0):U.results.reduce((function(t,n){return n.type===e?t+1:t}),0)};n.channelNoticePredicate=function(e,t){var n=Date.now()-t>=N.CHANNEL_NOTICE_SHOW_DELAY;return j&&n};n.getFrequentGuilds=function(){return null!=U?U.queryGuilds("",100):null};n.getFrequentGuildsLength=function(){
return null!=U?U.queryGuilds("",100).length:0};n.getProps=function(){return{theme:O.default.theme,query:null!=U?U.query:"",queryMode:G,results:W,selectedIndex:w,seenTutorial:k,maxQueryLength:K}};return t}(g.default))(o.default,((r={})[N.ActionTypes.CONNECTION_OPEN]=function(e){var t=e.guilds,n=e.channels;j=t.length>=3||n.filter((function(e){var t=e.type;return(0,c.isPrivate)(t)})).length>=20},r[N.ActionTypes.QUICKSWITCHER_SHOW]=q,r[N.ActionTypes.SHOW_ACTION_SHEET_QUICK_SWITCHER]=q,r[N.ActionTypes.QUICKSWITCHER_HIDE]=B,r[N.ActionTypes.OVERLAY_SET_INPUT_LOCKED]=B,r[N.ActionTypes.HIDE_ACTION_SHEET_QUICK_SWITCHER]=B,r[N.ActionTypes.QUICKSWITCHER_SEARCH]=function(e){var t=e.query,n=e.queryMode;if(null==U)return!1;var r=T.default.getGuildId()||null;if(G!==n){U.setResultTypes(null!=n?[n]:null);U.setLimit(null!=n?100:5);var u=T.default.getGuildId()||void 0;n===a.AutocompleterResultTypes.USER&&null!=u?U.setOptions({userFilters:{guild:u,friends:!0}
},!0):n===a.AutocompleterResultTypes.VOICE_CHANNEL?U.setOptions({voiceChannelGuildFilter:null},!0):U.setOptions({userFilters:null,voiceChannelGuildFilter:void 0},!0)}G=n;U.search(t,G===a.AutocompleterResultTypes.USER?r:void 0)},r[N.ActionTypes.QUICKSWITCHER_SELECT]=function(e){w=e.selectedIndex},r[N.ActionTypes.QUICKSWITCHER_SWITCH_TO]=function(){if(k)return!1;k=!0;l.default.set(H,!0)},r)),X=V;t.default=X},676614:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=t.LinkRecord=void 0;var r;function u(e,t){u=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return u(e,t)}var l=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;u(e,t)}(t,e);t.fromPath=function(e){return new t({id:e,path:e})};function t(t){var n;(n=e.call(this)||this).id=t.id;n.path=t.path;return n}return t}(((r=n(821896))&&r.__esModule?r:{default:r}).default);t.LinkRecord=l;var o=l;t.default=o},126208:(e,t,n)=>{Object.defineProperty(t,"__esModule",{
value:!0});t.default=void 0;var r,u=p(n(536211)),l=p(n(972247)),o=p(n(636602)),a=p(n(71319)),i=p(n(644263)),s=p(n(30098)),c=p(n(211136)),d=p(n(790597)),f=n(770348);function p(e){return e&&e.__esModule?e:{default:e}}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(e,r.key,r)}}function h(e,t){h=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return h(e,t)}var _="selectedChannelGuildFrecency",v=new a.default((function(){return 100}),(function(e){var t=0;0===e?t=100:e>=1&&e<2?t=70:e>=2&&e<4?t=50:e>=4&&e<7?t=30:e>=7&&(t=10);return t}),(function(e){var t,n;return null!==(t=null!==(n=s.default.getGuild(e))&&void 0!==n?n:i.default.getChannel(e))&&void 0!==t?t:i.default.getChannel(i.default.getDMFromUserId(e))}),(function(e){__OVERLAY__||l.default.set(_,e)}),100,10),C=null,m=null;function A(e){var t=e.guildId,n=e.channelId;if(n!==C){C=n||null;null!=n&&v.track(n)}
if(null!=t&&t!==m){m=t;v.track(t)}return!1}function T(){v.markDirty();return!1}var R=new(function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;h(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}var n=t.prototype;n.initialize=function(){this.waitFor(d.default,c.default);var e=l.default.get(_,null);null!=e&&v.overwriteHistory(e)};n.getFrequently=function(){return v.frequently};n.getScore=function(e){var t;return null!==(t=v.getFrecency(e))&&void 0!==t?t:0};n.getScoreForDM=function(e){var t=i.default.getDMFromUserId(e);return null!=t?this.getScore(t):0};n.getMaxScore=function(){return 1e3};n.getBonusScore=function(){return 100};!function(e,t,n){t&&y(e.prototype,t);n&&y(e,n);Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"frecency",get:function(){return v}}]);return t}(u.default.Store))(o.default,((r={})[f.ActionTypes.CONNECTION_OPEN]=T,r[f.ActionTypes.OVERLAY_INITIALIZE]=T,r[f.ActionTypes.VOICE_CHANNEL_SELECT]=A,
r[f.ActionTypes.CHANNEL_SELECT]=A,r));t.default=R},298698:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var r;function u(e,t){u=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return u(e,t)}var l=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;u(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}t.prototype.channelNoticePredicate=function(e,t){0;return!1};return t}(((r=n(536211))&&r.__esModule?r:{default:r}).default.Store);t.default=l},223367:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var r,u,l,o,a=C(n(536211)),i=C(n(636602)),s=v(n(334007)),c=C(n(191839)),d=C(n(834162)),f=n(811076),p=n(864489),y=v(n(324033)),h=n(770348);function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_=function(e){return e?n:t})(e)}function v(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{
default:e};var n=_(t);if(n&&n.has(e))return n.get(e);var r={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=u?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(r,l,o):r[l]=e[l]}r.default=e;n&&n.set(e,r);return r}function C(e){return e&&e.__esModule?e:{default:e}}function m(e,t){m=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return m(e,t)}function A(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){
return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var R=new(function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;m(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}var n=t.prototype;n.initialize=function(){p.isPlatformEmbedded&&y.init();u={};l=new Set;o=[]};n.getState=function(e,t){var n=(0,f.getComboId)(e,t);return u[n]};n.isSyncing=function(e,t){var n=(0,f.getComboId)(e,t);return l.has(n)};return t}(a.default.Store))(i.default,((r={})[h.ActionTypes.GAME_CLOUD_SYNC_START]=function(e){var t=e.applicationId,n=e.branchId,r=(0,f.getComboId)(t,n);l.add(r)},r[h.ActionTypes.GAME_CLOUD_SYNC_UPDATE]=function(e){for(var t=e.state,n=0,r=Object.keys(t);n<r.length;n++){var l=r[n]
;u[l]=t[l]}},r[h.ActionTypes.GAME_CLOUD_SYNC_COMPLETE]=function(e){var t=e.applicationId,n=e.branchId,r=(0,f.getComboId)(t,n);l.delete(r);u[r]={type:h.CloudSyncStateTypes.DONE,timestamp:Date.now()};return!0},r[h.ActionTypes.GAME_CLOUD_SYNC_CONFLICT]=function(e){var t=e.applicationId,n=e.branchId,r=e.next,o=e.remote,a=(0,f.getComboId)(t,n);u[a]={type:h.CloudSyncStateTypes.CONFLICT,next:r,remote:o};l.delete(a)},r[h.ActionTypes.GAME_CLOUD_SYNC_ERROR]=function(e){var t=e.applicationId,n=e.branchId,r=(0,f.getComboId)(t,n);u[r]={type:h.CloudSyncStateTypes.ERROR};l.delete(r)},r[h.ActionTypes.RUNNING_GAMES_CHANGE]=function(){for(var e,t=d.default.getRunningDiscordApplicationIds(),n=function(){var t=e.value,n=c.default.getActiveLibraryApplication(t);if(null==n)return"continue";i.default.wait((function(){try{s.sync(n.id,n.branchId)}catch(e){}}))},r=A(o.filter((function(e){return!t.includes(e)})));!(e=r()).done;)n();o=t;return!1},r));t.default=R},324033:(e,t,n)=>{
Object.defineProperty(t,"__esModule",{value:!0});t.init=function(){return C.apply(this,arguments)};t.syncApplication=function(e,t,n){var l;void 0===n&&(n=null);if(!s.default.supportsCloudSync(e,t))return Promise.resolve({type:p.CloudSyncResultTypes.NONE});var o=function(){if(null==r)throw new Error("Initialize cloud sync module before syncing.");return r}(),d=s.default.getState(e,t);if(null==d)throw new Error("No dispatch state for "+e+":"+t);var f=null!==(l=d.storage)&&void 0!==l?l:{},y=(0,c.getComboId)(e,t),h=i.default.getToken();if(null==h)throw new Error("Cannot use cloud sync when not authenticated.");var _=null!=d.installPath?(0,a.default)(d.installPath):null;if(null==_)throw new Error("No install path for "+e+":"+t);var v=i.default.getId(),C={forceHash:n,manifestPath:p.DefaultCloudSyncConfiguration.STORAGE_MANIFEST(_,v),roots:null!=f.roots?f.roots:[{id:p.DefaultCloudSyncConfiguration.ROOT_ID,paths:Object.keys(p.DefaultCloudSyncConfiguration.ROOT_PLATFORMS).map((function(e){
return{platform:e,path:p.DefaultCloudSyncConfiguration.ROOT_STORAGE_PATH(_,v)}})),patterns:p.DefaultCloudSyncConfiguration.ROOT_PATTERN}],storage:{baseURL:""+u.default.getAPIBaseURL()+p.Endpoints.APPLICATION_STORAGE(e,t),token:h},replacements:{INSTALLDIR:p.DefaultCloudSyncConfiguration.INSTALL_DIR(_),USERID:v,BRANCHID:t}};return o.sync(y,C)};var r,u=y(n(118915)),l=y(n(636602)),o=y(n(791548)),a=y(n(536958)),i=y(n(423046)),s=y(n(432310)),c=n(811076),d=n(864489),f=y(n(922629)),p=n(770348);function y(e){return e&&e.__esModule?e:{default:e}}function h(e,t,n,r,u,l,o){try{var a=e[l](o),i=a.value}catch(e){n(e);return}a.done?t(i):Promise.resolve(i).then(r,u)}function _(e){return function(){var t=this,n=arguments;return new Promise((function(r,u){var l=e.apply(t,n);function o(e){h(l,r,u,o,a,"next",e)}function a(e){h(l,r,u,o,a,"throw",e)}o(void 0)}))}}function v(){return d.isPlatformEmbedded&&((0,d.isOSX)()||(0,d.isWindows)())}function C(){return(C=_(regeneratorRuntime.mark((function e(){var t
;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==r){e.next=2;break}return e.abrupt("return");case 2:if(v()){e.next=5;break}new o.default("CloudSyncUtils").warn("CloudSync is not supported on this platform");return e.abrupt("return");case 5:e.next=7;return f.default.ensureModule("discord_cloudsync");case 7:t=f.default.getCloudSync();(r=new t).on("state",(function(e){return l.default.dispatch({type:p.ActionTypes.GAME_CLOUD_SYNC_UPDATE,state:e})}));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},756473:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.installApplication=function(e,t,i,s,d){var p=o.default.getInstallationPath(e.id,t),y=null!=e.eulaId&&!l.default.hasAcceptedEULA(e.eulaId);null==p||y?(0,a.openModalLazy)(f(regeneratorRuntime.mark((function u(){var l,o;return regeneratorRuntime.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:u.next=2
;return Promise.all([n.e(40532),n.e(35666),n.e(54587),n.e(32660),n.e(71473),n.e(24724),n.e(6379),n.e(98628),n.e(62764),n.e(23046),n.e(23950),n.e(90054),n.e(29731),n.e(44461),n.e(68457),n.e(87690)]).then(n.bind(n,665905));case 2:l=u.sent;o=l.default;return u.abrupt("return",(function(n){return r.createElement(o,c({},n,{applicationId:e.id,branchId:t,analyticsLocation:d}))}));case 5:case"end":return u.stop()}}),u)})))):(0,u.installApplication)(e,t,i,s,p,d)};var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=u?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(r,l,o):r[l]=e[l]}r.default=e;n&&n.set(e,r);return r}(n(667294)),u=n(27555),l=i(n(421558)),o=i(n(979285)),a=n(194322);function i(e){
return e&&e.__esModule?e:{default:e}}function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function c(){c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};return c.apply(this,arguments)}function d(e,t,n,r,u,l,o){try{var a=e[l](o),i=a.value}catch(e){n(e);return}a.done?t(i):Promise.resolve(i).then(r,u)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,u){var l=e.apply(t,n);function o(e){d(l,r,u,o,a,"next",e)}function a(e){d(l,r,u,o,a,"throw",e)}o(void 0)}))}}},409873:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.installApplication=y;t.performDefaultLibraryApplicationAction=function(e,t){var n=(0,a.getDefaultLibraryApplicationAction)(e,i.default,s.default),r=t.analyticsParams;switch(n){case d.LibraryApplicationActions.PLAY:return(0,
u.playApplication)(e.id,e,{analyticsParams:r});case d.LibraryApplicationActions.INSTALL:return y(e.id,e.branchId,r.source);case d.LibraryApplicationActions.UPDATE:return h(e.id,e.branchId)}};Object.defineProperty(t,"playApplication",{enumerable:!0,get:function(){return u.playApplication}});t.repairApplication=function(e,t,n){var u=l.default.getGame(e);if(null==u)return;return r.repairApplication(u,t,n)};t.updateApplication=h;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=u?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(r,l,o):r[l]=e[l]}r.default=e;n&&n.set(e,r);return r}(n(27555)),u=n(107974),l=f(n(288356)),o=f(n(125150)),a=n(440815),i=f(n(432310)),s=f(n(693399)),c=n(756473),d=n(770348)
;function f(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function y(e,t,n){var r=l.default.getGame(e);if(null!=r){var u=o.default.getTargetBuildId(r.id,t),a=o.default.getTargetManifests(r.id,t);null!=u&&null!=a&&null!=c.installApplication&&(0,c.installApplication)(r,t,u,a,n)}}function h(e,t){var n=l.default.getGame(e);if(null!=n)return r.updateApplication(n,t,o.default.getTargetBuildId(n.id,t),o.default.getTargetManifests(n.id,t))}}}]);
//# sourceMappingURL=8790c882acd7207c0018.js.map