"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[9669],{413546:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var o,r=(o=n(636602))&&o.__esModule?o:{default:o},i=n(770348);var a={popFirstFile:function(e){r.default.dispatch({type:i.ActionTypes.UPLOAD_ATTACHMENT_POP_FILE,channelId:e})},addFiles:function(e){var t=e.files,n=e.channelId,o=e.showLargeMessageDialog,a=e.draftType;r.default.dispatch({type:i.ActionTypes.UPLOAD_ATTACHMENT_ADD_FILES,channelId:n,files:t,showLargeMessageDialog:o,draftType:a})},addFile:function(e){var t=e.file,n=e.channelId,o=e.showLargeMessageDialog,a=e.draftType;r.default.dispatch({type:i.ActionTypes.UPLOAD_ATTACHMENT_ADD_FILES,channelId:n,files:[t],showLargeMessageDialog:o,draftType:a})},remove:function(e,t,n){r.default.dirtyDispatch({type:i.ActionTypes.UPLOAD_ATTACHMENT_REMOVE_FILE,channelId:e,id:t,draftType:n})},removeFiles:function(e,t,n){r.default.dispatch({
type:i.ActionTypes.UPLOAD_ATTACHMENT_REMOVE_FILES,channelId:e,attachmentIds:t,draftType:n})},clearAll:function(e,t){r.default.dirtyDispatch({type:i.ActionTypes.UPLOAD_ATTACHMENT_CLEAR_ALL_FILES,channelId:e,draftType:t})},update:function(e,t,n,o){var a=o.description,u=o.filename,l=o.spoiler;r.default.dispatch({type:i.ActionTypes.UPLOAD_ATTACHMENT_UPDATE_FILE,channelId:e,id:t,filename:u,description:a,spoiler:l,draftType:n})},setUploads:function(e){var t=e.uploads,n=e.channelId,o=e.draftType;r.default.dirtyDispatch({type:i.ActionTypes.UPLOAD_ATTACHMENT_SET_UPLOADS,channelId:n,uploads:t,draftType:o})},setFile:function(e){var t=e.file,n=e.channelId,o=e.id,a=e.draftType;r.default.dirtyDispatch({type:i.ActionTypes.UPLOAD_ATTACHMENT_SET_FILE,channelId:n,id:o,file:t,draftType:a})}};t.default=a},298169:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.numberParts=void 0;t.numberParts={__proto__:null,bg:{group:" ",decimal:","},cs:{group:" ",decimal:","},da:{group:".",decimal:","},de:{
group:".",decimal:","},el:{group:".",decimal:","},"en-GB":{group:",",decimal:"."},"en-US":{group:",",decimal:"."},"es-ES":{group:".",decimal:","},fi:{group:" ",decimal:","},fr:{group:"â€¯",decimal:","},hi:{group:",",decimal:"."},hr:{group:".",decimal:","},hu:{group:" ",decimal:","},it:{group:".",decimal:","},ja:{group:",",decimal:"."},ko:{group:",",decimal:"."},lt:{group:" ",decimal:","},nl:{group:".",decimal:","},no:{group:" ",decimal:","},pl:{group:" ",decimal:","},"pt-BR":{group:".",decimal:","},ro:{group:".",decimal:","},ru:{group:" ",decimal:","},"sv-SE":{group:" ",decimal:","},th:{group:",",decimal:"."},tr:{group:".",decimal:","},uk:{group:" ",decimal:","},vi:{group:".",decimal:","},"zh-CN":{group:",",decimal:"."},"zh-TW":{group:",",decimal:"."}}},166806:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.useTopCommands=function(e){o.useEffect((function(){i.FrecencyUserSettingsActionCreators.loadIfNecessary()}),[]);var t=(0,r.useStateFromStores)([a.default],(function(){
return a.default.getTopCommandsWithoutLoadingLatest()}));return o.useMemo((function(){return(0,a.getFilteredTopCommands)(t,e)}),[t,e])};t.useTopRealCommands=function(e){o.useEffect((function(){i.FrecencyUserSettingsActionCreators.loadIfNecessary()}),[]);var t=(0,r.useStateFromStores)([a.default],(function(){return a.default.getTopCommandsWithoutLoadingLatest()}));return o.useMemo((function(){var n=(0,a.getFilteredTopCommands)(t,e);return(0,a.getTopRealCommands)(n)}),[t,e])};var o=l(n(667294)),r=n(536211),i=n(828593),a=l(n(290760));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function l(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var o={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){
var a=r?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(o,i,a):o[i]=e[i]}o.default=e;n&&n.set(e,o);return o}},632184:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var o,r,i,a,u,l,d=m(n(536211)),c=m(n(636602)),p=m(n(473517)),f=m(n(892083)),s=n(770348);function m(e){return e&&e.__esModule?e:{default:e}}function y(e,t){y=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return y(e,t)}function v(){i=null;r=null;u=null;l=null}function g(e){var t=e.guildId;if(a!==t)return!1;h()}function h(){var e;i=null===(e=i)||void 0===e?void 0:e.markStale()}var I=new(function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;y(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}var n=t.prototype;n.initialize=function(){this.waitFor(p.default)};n.getGuildCommands=function(e,t){var n,o
;return(null===(n=i)||void 0===n?void 0:n.guildId)===e&&(null===(o=i)||void 0===o?void 0:o.commandType)===t?i:null};n.getFilteredApplicationId=function(e){var t;return(null===(t=i)||void 0===t?void 0:t.guildId)===e?l:null};return t}(d.default.Store))(c.default,((o={})[s.ActionTypes.LOGOUT]=function(){a=null;l=null;v()},o[s.ActionTypes.CLEAR_GUILD_DISCOVERY_COMMANDS]=v,o[s.ActionTypes.CHANNEL_SELECT]=function(e){var t=e.guildId;if(a===t)return!1;a=t;i=null;r=null;u=null;l=null},o[s.ActionTypes.GUILD_APPLICATION_COMMANDS_UPDATE]=function(e){var t=e.nonce,n=e.applications,o=e.applicationCommands;if(t===r&&null!=u){var a;i=null===(a=i)||void 0===a?void 0:a.loadComplete(o,u.isBefore,u.offset,u.commandType,u.jumpDescriptor,n);u=null}},o[s.ActionTypes.INTEGRATION_DELETE]=function(e){var t=e.guildId,n=e.applicationId;if(a!==t)return!1;null!=n&&h()},o[s.ActionTypes.APPLICATION_COMMAND_DISCOVERY_REQUEST]=function(e){
var t,n=e.guildId,o=e.offset,a=e.isBefore,d=e.jumpDescriptor,c=e.nonce,p=e.commandType;p!==(null===(t=i)||void 0===t?void 0:t.commandType)&&v();l=null;r=c;u={guildId:n,offset:o,isBefore:a,jumpDescriptor:d,commandType:p};null!=i&&i.guildId===n||(i=new f.default(n));i=i.loadStart()},o[s.ActionTypes.APPLICATION_COMMAND_QUERY_LIST_REQUEST]=function(e){var t=e.guildId,n=e.applicationId,o=e.commandType,a=e.nonce;if("discovery"===e.scope){r=a;u={guildId:t,offset:0,isBefore:!1,commandType:o,jumpDescriptor:{sectionId:n}};l=n;null!=i&&i.guildId===t||(i=new f.default(t));i=i.loadStart()}},o[s.ActionTypes.APPLICATIONS_REQUEST]=function(e){var t,n=e.nonce,o=e.guildId,a=e.commandType;a!==(null===(t=i)||void 0===t?void 0:t.commandType)&&v();l=null;r=n;u={guildId:o,offset:0,isBefore:!1,commandType:a};(null==i||i.guildId!==o||i.isStale)&&(i=new f.default(o))},o[s.ActionTypes.APPLICATION_COMMAND_CREATE]=g,o[s.ActionTypes.APPLICATION_COMMAND_DELETE]=g,o[s.ActionTypes.APPLICATION_COMMAND_UPDATE]=g,o))
;t.default=I},24922:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.filterEmpty=s;t.getBoolean=m;t.getChannelId=y;t.getOptionalBoolean=function(e,t){return null==e[t]?null:m(e,t)};t.getOptionalChannelId=function(e,t){return null==e[t]?null:y(e,t)};t.getOptionalRoleId=function(e,t){return null==e[t]?null:g(e,t)};t.getOptionalString=function(e,t){return null==e[t]?null:h(e,t)};t.getOptionalUserId=function(e,t){return null==e[t]?null:v(e,t)};t.getRoleId=g;t.getString=h;t.getUserId=v;t.normalizeNumericString=function(e,t){if(e!==i){var n;i=e;var a=null!==(n=u.numberParts[e])&&void 0!==n?n:u.numberParts["en-US"],d=a.group,c=a.decimal;o=new RegExp(l.default.escape(d),"g");r=new RegExp(l.default.escape(c),"g")}return t.replace(o,"").replace(r,".")};var o,r,i,a=c(n(441143)),u=n(298169),l=c(n(827513)),d=n(484278);function c(e){return e&&e.__esModule?e:{default:e}}function p(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]
;if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function s(e){return null==e?[]:e.filter((function(t,n){return"text"!==t.type||(n>0&&n<e.length-1?""!==t.text:""!==t.text.trim())}))}function m(e,t){var n,o=s(e[t]);(0,a.default)(1===o.length,"Contains multiple values");(0,
a.default)("text"===(null===(n=o[0])||void 0===n?void 0:n.type),"First value is not text");return o[0].text===d.TRUE_OPTION_NAME}function y(e,t){var n,o=s(e[t]);(0,a.default)(1===o.length,"Contains multiple values");(0,a.default)("channelMention"===(null===(n=o[0])||void 0===n?void 0:n.type),"First value is not a channel mention");return o[0].channelId}function v(e,t){var n,o=s(e[t]);(0,a.default)(1===o.length,"Contains multiple values");(0,a.default)("userMention"===(null===(n=o[0])||void 0===n?void 0:n.type),"First value is not a user mention");return o[0].userId}function g(e,t){var n,o=s(e[t]);(0,a.default)(1===o.length,"Contains multiple values");(0,a.default)("roleMention"===(null===(n=o[0])||void 0===n?void 0:n.type),"First value is not a role mention");return o[0].roleId}function h(e,t){for(var n,o="",r=p(e[t]);!(n=r()).done;){var i=n.value;switch(i.type){case"text":case"textMention":o+=i.text;break;case"userMention":o+="<@!"+i.userId+">";break;case"channelMention":
o+="<#"+i.channelId+">";break;case"roleMention":o+="<@&"+i.roleId+">";break;case"emoji":o+=i.surrogate;break;case"customEmoji":o+="<"+(i.animated?"a":"")+":"+i.name.replace(/:/g,"").split("~")[0]+":"+i.emojiId+">"}}return o}},892083:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var o=n(153823);t.default=function e(t){var n=this;this.commandType=null;this.commandsArray=[];this._map={};this._commandIds=new Set;this.topOffset=-1;this.bottomOffset=-1;this.jumpDescriptor=null;this.jumpSequenceId=1;this.loadingMore=!1;this.isStale=!1;this.mutate=function(t){var o=new e(n.guildId);o.commandType=n.commandType;o.commandsArray=n.commandsArray;o._map=n._map;o._commandIds=n._commandIds;o.topOffset=n.topOffset;o.bottomOffset=n.bottomOffset;o.jumpDescriptor=n.jumpDescriptor;o.loadingMore=n.loadingMore;o.jumpSequenceId=n.jumpSequenceId;o.isStale=n.isStale;t(o);return o};this.loadStart=function(){return n.mutate((function(e){e.loadingMore=!0;e.jumpDescriptor=null}))}
;this.loadComplete=function(e,t,o,r,i,a){return(null!=i?n.reset(e,o,a):n.merge(e,t,a)).mutate((function(e){e.jumpDescriptor=i;e.loadingMore=!1;e.commandType=r;null!=i&&(e.jumpSequenceId=n.jumpSequenceId+1)}))};this.reset=function(e,t,r){var i=e.filter((function(e){return null!=e.id&&!1!==e.listed})).length,a=null==r?void 0:(0,o.applicationPermissionsList)(r);return n.mutate((function(n){n.commandsArray=(0,o.buildApplicationCommands)(e,a);n._map={};n.commandsArray.forEach((function(e){return n._map[e.id]=e}));n._commandIds.clear();e.forEach((function(e){null!=e.id&&""!==e.id&&n._commandIds.add(e.id)}));n.topOffset=t;n.bottomOffset=Math.max(t+i-1,t);n.isStale=!1}))};this.merge=function(e,t,r){var i=null==r?void 0:r.map((function(e){return{applicationCommandPermissions:e.application_command_permissions,id:e.id}})),a=null!=i?(0,o.applicationPermissionsList)(i):void 0;return n.mutate((function(n){var r=e.filter((function(e){if(null==e.id||!1===e.listed)return!1
;if(n._commandIds.has(e.id))return!1;n._commandIds.add(e.id);return!0})).length,i=(0,o.buildApplicationCommands)(e,a).filter((function(e){var t=n._map[e.id];n._map[e.id]=e;if(null!=t){n.commandsArray[n.commandsArray.indexOf(t)]=e;return!1}return!0}));n.commandsArray=t?[].concat(i,n.commandsArray):[].concat(n.commandsArray,i);if(r>0){t?n.topOffset-=r:n.bottomOffset+=r;n.topOffset=-1===n.topOffset?0:n.topOffset;n.bottomOffset=-1===n.bottomOffset?0:n.bottomOffset;n.isStale=!1}}))};this.markStale=function(){return n.mutate((function(e){e.isStale=!0}))};this.guildId=t}},462936:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,n,o,r){return R.apply(this,arguments)};t.retryCommandMessage=void 0
;var o=N(n(441143)),r=N(n(636602)),i=N(n(786345)),a=N(n(413546)),u=n(81069),l=P(n(79267)),d=N(n(844784)),c=P(n(741464)),p=n(632341),f=P(n(551048)),s=N(n(887174)),m=n(687549),y=N(n(433385)),v=N(n(30098)),g=N(n(680873)),h=N(n(871778)),I=N(n(728429)),A=n(71246),T=n(536487),C=N(n(373265)),_=P(n(24922)),O=n(65621),M=n(153823),b=n(484278),S=n(770348);function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}function P(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var o={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=r?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(o,i,a):o[i]=e[i]}o.default=e;n&&n.set(e,o);return o}function N(e){return e&&e.__esModule?e:{default:e}}function D(e,t){
var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function j(e,t,n,o,r,i,a){try{var u=e[i](a),l=u.value}catch(e){n(e);return}u.done?t(l):Promise.resolve(l).then(o,r)}function w(e){return function(){var t=this,n=arguments
;return new Promise((function(o,r){var i=e.apply(t,n);function a(e){j(i,o,r,a,u,"next",e)}function u(e){j(i,o,r,a,u,"throw",e)}a(void 0)}))}}var U=function(e,t){var n;return null==e||null===(n=e.find((function(e){return e.displayName===t})))||void 0===n?void 0:n.value},x=function(e,t,n,o){var r;void 0===o&&(o=function(e){return e});if(e.name===(null===(r=n.autocomplete)||void 0===r?void 0:r.name))return t;if(""===t)return null;var i=C.default.getAutocompleteLastChoices(n.channel.id,e.name);if(null!=i){var a;return null!==(a=U(i,t))&&void 0!==a?a:o(t)}return o(t)},k=function(e){var t=e.toLowerCase()===b.TRUE_OPTION_NAME.toLowerCase(),n=e.toLowerCase()===b.FALSE_OPTION_NAME.toLowerCase();return t||n?t:null};function R(){return(R=w(regeneratorRuntime.mark((function e(t,n,i,l,c){var p,f,y,v,I,A,C,M,b,E,P,N,L,j,w,R,W,H,G,V,Y,q,$,z,Q,Z,X,J;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=i.autocomplete){e.next=5;break}r.default.dispatch({
type:"APPLICATION_COMMAND_USED",context:i,command:t});if(!i.channel.isArchivedThread()){e.next=5;break}e.next=5;return s.default.unarchiveThread(i.channel,!1);case 5:I=[];A=[];if(null==t.options){e.next=53;break}C=D(t.options);case 9:if((M=C()).done){e.next=53;break}if((P=M.value).type!==u.ApplicationCommandOptionType.SUB_COMMAND&&P.type!==u.ApplicationCommandOptionType.SUB_COMMAND_GROUP&&P.name in n){e.next=13;break}return e.abrupt("continue",51);case 13:N=(null===(b=i.autocomplete)||void 0===b?void 0:b.name)===P.name||void 0;L=null;if(P.type!==u.ApplicationCommandOptionType.STRING){e.next=21;break}R=null!==(j=null===(w=_.getOptionalString(n,P.name))||void 0===w?void 0:w.trim())&&void 0!==j?j:"";L=null!=P.choices?U(P.choices,R):P.autocomplete?x(P,R,i):R;(0,o.default)(null!=i.autocomplete||null!=L,'Option "'+P.name+'" expects a value');null!=L&&I.push({type:P.type,name:P.name,value:L,focused:N});return e.abrupt("continue",51);case 21:
if(P.type!==u.ApplicationCommandOptionType.ATTACHMENT){e.next=25;break}if("continue"!==function(){var e=g.default.getUpload(i.channel.id,P.name,m.DraftType.ChannelMessage);if(null==e)return"continue";var t=g.default.getUploads(i.channel.id,m.DraftType.ChannelMessage).findIndex((function(t){return e.id===t.id}));A.push(e);L=t;I.push({type:P.type,name:P.name,value:L,focused:N});return"continue"}()){e.next=25;break}return e.abrupt("continue",51);case 25:W=_.filterEmpty(n[P.name]);(0,o.default)(null!=i.autocomplete||1===W.length,'Option "'+P.name+'" expects a single option type');if(null!=W[0]||N){e.next=29;break}return e.abrupt("continue",51);case 29:H=null!==(E=W[0])&&void 0!==E?E:{type:"text",text:""};e.t0=P.type
;e.next=e.t0===u.ApplicationCommandOptionType.CHANNEL?33:e.t0===u.ApplicationCommandOptionType.ROLE?35:e.t0===u.ApplicationCommandOptionType.USER?37:e.t0===u.ApplicationCommandOptionType.MENTIONABLE?39:e.t0===u.ApplicationCommandOptionType.BOOLEAN?41:e.t0===u.ApplicationCommandOptionType.INTEGER?43:e.t0===u.ApplicationCommandOptionType.NUMBER?45:47;break;case 33:"channelMention"===H.type?L=H.channelId:"text"===H.type&&(L=H.text.trim());return e.abrupt("break",49);case 35:"roleMention"===H.type?L=H.roleId:"text"===H.type?L=H.text.trim():"textMention"===H.type&&"@everyone"===H.text&&(L=null===(G=i.guild)||void 0===G?void 0:G.id);return e.abrupt("break",49);case 37:"userMention"===H.type?L=H.userId:"text"===H.type&&(L=H.text.trim());return e.abrupt("break",49);case 39:"userMention"===H.type?L=H.userId:"roleMention"===H.type?L=H.roleId:"text"===H.type?L=H.text.trim():"textMention"===H.type&&"@everyone"===H.text&&(L=null===(V=i.guild)||void 0===V?void 0:V.id);return e.abrupt("break",49)
;case 41:"text"===H.type&&(L=k(H.text.trim()));return e.abrupt("break",49);case 43:if("text"===H.type){Y=H.text.trim();L=null!=P.choices?Number(U(P.choices,Y)):P.autocomplete?x(P,Y,i,Number):Number(_.normalizeNumericString(h.default.locale,Y))}return e.abrupt("break",49);case 45:if("text"===H.type){q=H.text.trim();L=null!=P.choices?Number(U(P.choices,q)):P.autocomplete?x(P,q,i,Number):Number(_.normalizeNumericString(h.default.locale,q))}return e.abrupt("break",49);case 47:(0,o.default)("Unsupported option type: "+P.type);return e.abrupt("continue",51);case 49:(0,o.default)(null!=i.autocomplete||null!=L,'Unexpected value for option "'+P.name+'"');null!=L&&I.push({type:P.type,name:P.name,value:L,focused:N});case 51:e.next=9;break;case 53:if(null!=t.subCommandPath)for($=t.subCommandPath.length-1;$>=0;$-=1){z=t.subCommandPath[$],Q=z.name,Z=z.type;I=[{type:Z,name:Q,options:I}]}if(null==t.execute){e.next=57;break}d.default.trackWithMetadata(S.AnalyticEvents.APPLICATION_COMMAND_USED,{
command_id:t.id,application_id:t.applicationId,command_type:t.type});return e.abrupt("return",t.execute(I,i));case 57:if(t.inputType!==O.ApplicationCommandInputType.BUILT_IN&&t.inputType!==O.ApplicationCommandInputType.BUILT_IN_TEXT&&t.inputType!==O.ApplicationCommandInputType.BUILT_IN_INTEGRATION){e.next=59;break}return e.abrupt("return");case 59:X={version:t.version,id:null!==(p=null===(f=t.rootCommand)||void 0===f?void 0:f.id)&&void 0!==p?p:t.id,guild_id:t.guildId,name:null!==(y=null===(v=t.rootCommand)||void 0===v?void 0:v.name)&&void 0!==y?y:t.name,type:t.type,options:I,application_command:t.rootCommand};J=function(){B(n)};null!=l&&(X.target_id=l);if(null!=i.autocomplete)(0,T.performAutocomplete)(t,i,X);else{a.default.clearAll(i.channel.id,m.DraftType.ChannelMessage);F(t.applicationId,X,i,A,c,J)}case 63:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var B=function(e){var t=Object.values(e).flatMap((function(e){return e.map((function(e){return"emoji"===e.type?{
name:e.name.replaceAll(":","")}:"customEmoji"===e.type?y.default.getCustomEmojiById(e.emojiId):null})).filter(A.isNotNullish)}));t.length>0&&r.default.dispatch({type:S.ActionTypes.EMOJI_TRACK_USAGE,emojiUsed:t})};t.retryCommandMessage=function(e,t,n){if(e.isCommandType()){var o=t.guild_id;null!=e.interactionData&&F(n,e.interactionData,{channel:t,guild:null!=o?v.default.getGuild(o):null})}};var F=function(e,t,n,o,a,d){var s=n.channel,m=n.guild,y=s.id,v=null==m?void 0:m.id,g=(0,M.getInteractionAuthor)(n,e),h=g[0],A=g[1],T=t.type===u.ApplicationCommandType.CHAT?S.MessageTypes.CHAT_INPUT_COMMAND:S.MessageTypes.CONTEXT_MENU_COMMAND,C=(0,f.default)(y,"",!1,T,void 0,void 0,null!=h?h:void 0);C.application=null!=A?A:void 0;C.interaction={id:t.id,name:t.name,type:u.InteractionTypes.APPLICATION_COMMAND,user:(0,f.userRecordToServer)(I.default.getCurrentUser())};C.interaction_data=t;var _={applicationId:e,channelId:y,guildId:v,data:t,nonce:C.id,attachments:o,maxSizeCallback:a}
;i.default.receiveMessage(y,C,!0,{applicationId:e});c.addQueued(_.nonce,{messageId:C.id,onCreate:function(e){null!=C.interaction&&(C.interaction.id=e)},onFailure:function(e,t){return function(e,t){null==t&&null!=e&&i.default.sendClydeError(y,e);r.default.dirtyDispatch({type:S.ActionTypes.MESSAGE_SEND_FAILED,messageId:C.id,channelId:y,reason:t})}(e,t)},data:{interactionType:u.InteractionTypes.APPLICATION_COMMAND,channelId:y}});l.default.enqueue({type:l.MessageDataType.COMMAND,message:_},(function(e){(0,p.handleInteractionResponse)(_.nonce,e);e.ok&&null!=d&&d()}))}},807149:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.useApplicationCommandsDiscoveryState=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=I(t);if(n&&n.has(e))return n.get(e);var o={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){
var a=r?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(o,i,a):o[i]=e[i]}o.default=e;n&&n.set(e,o);return o}(n(667294)),r=h(n(496486)),i=n(536211),a=h(n(689389)),u=h(n(728429)),l=n(481414),d=h(n(117883)),c=n(166806),p=h(n(290760)),f=h(n(632184)),s=h(n(473517)),m=n(65621),y=n(153823),v=n(484278),g=n(770348);function h(e){return e&&e.__esModule?e:{default:e}}function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(I=function(e){return e?n:t})(e)}var A={guildCommandSections:null,guildCommands:null,filteredApplicationId:null},T=function(e,t,n){return{type:n,inputType:m.ApplicationCommandInputType.PLACEHOLDER,id:"placeholder-"+e+"-"+t,name:"",displayName:"",description:"",displayDescription:"",applicationId:""}};t.useApplicationCommandsDiscoveryState=function(e,t,n,h){var I=(0,i.useStateFromStoresObject)([s.default,f.default,a.default],(function(){if(null==e.guild)return A
;if(!a.default.can(g.Permissions.USE_APPLICATION_COMMANDS,e.channel))return A;var t=e.guild.id;return{guildCommandSections:s.default.getGuildSections(t),guildCommands:f.default.getGuildCommands(t,n),filteredApplicationId:f.default.getFilteredApplicationId(t)}}),[e,n]),C=I.guildCommandSections,_=I.guildCommands,O=I.filteredApplicationId,M=o.useMemo((function(){return null==C?void 0:C.filter((function(e){var t,o;return(null!==(t=null===(o=e.commandCountByType)||void 0===o?void 0:o[n])&&void 0!==t?t:0)>0}))}),[C,n]),b=(0,i.useStateFromStoresObject)([d.default,u.default],(function(){var t,o,r;if((null===(t=e.channel)||void 0===t?void 0:t.type)!==g.ChannelTypes.DM)return{dmCommandSections:null,dmCommands:null};var i=null===(o=e.channel)||void 0===o?void 0:o.getRecipientId(),a=u.default.getUser(i);if(null==a||!0!==a.bot)return{dmCommandSections:null,dmCommands:null};var l=d.default.getCommands(i,n);return{dmCommandSections:null!=l&&l.length>0?[{id:l[0].applicationId,
type:m.ApplicationCommandSectionType.DM,name:a.username,commandCountByType:(r={},r[n]=l.length,r),icon:a.avatar}]:[],dmCommands:l}})),S=b.dmCommandSections,E=b.dmCommands,P=o.useMemo((function(){return function(e,t,n){var o=e.channel,r=e.guild;return null!=o?(0,l.getBuiltInCommands)(t,!0,n).filter((function(e){return null==e.predicate||e.predicate({channel:o,guild:r})})):[]}(e,n,h)}),[h,e,n]),N=(0,c.useTopCommands)(e),D=o.useState(!1),L=D[0],j=D[1];o.useEffect((function(){j(!1)}),[e,n]);var w=o.useMemo((function(){var t,n=(null!==(t=null!=e.guild?null==_?void 0:_.commandsArray:E)&&void 0!==t?t:[]).concat(P).filter((function(e){return!!N.includes(e.id)&&!!(0,y.hasAccess)(e)})).sort((function(t,n){var o=p.default.getScoreWithoutLoadingLatest(e,t);return p.default.getScoreWithoutLoadingLatest(e,n)-o})).slice(0,v.DISCOVERY_COMMANDS_FRECENCY_LIMIT);n.length>0&&j(!0);return n}),[P,e,N,E,null==_?void 0:_.commandsArray]),U=o.useMemo((function(){var t
;if(h)return[l.BUILT_IN_SECTIONS[v.BuiltInSectionId.BUILT_IN]];var n=L?[l.BUILT_IN_SECTIONS[v.BuiltInSectionId.FRECENCY]]:[],o=null!==(t=null!=e.guild?M:S)&&void 0!==t?t:[],r=[l.BUILT_IN_SECTIONS[v.BuiltInSectionId.BUILT_IN]];return[].concat(n,o,r)}),[h,e.guild,S,M,L]),x=o.useMemo((function(){if(null!=O)return{hasMoreBefore:!1,hasMoreAfter:!1};var e=U.reduce((function(e,t){var o;return e+(null!=t.commandCountByType&&null!==(o=t.commandCountByType[n])&&void 0!==o?o:0)}),0);return{hasMoreBefore:null!=_&&_.topOffset>0&&e>0,hasMoreAfter:null!=_&&_.bottomOffset<e-1}}),[_,U,n,O]),k=x.hasMoreBefore,R=x.hasMoreAfter,B=o.useMemo((function(){if(!k)return[];for(var e=[],o=0;o<t;o++)e.push(T("before",o,n));return e}),[k,t,n]),F=o.useMemo((function(){if(!R)return[];for(var e=[],o=0;o<t;o++)e.push(T("after",o,n));return e}),[R,t,n]),W=o.useMemo((function(){var t;if(h)return P;var n=null!==(t=null!=e.guild?null==_?void 0:_.commandsArray:E)&&void 0!==t?t:[];R||(n=n.concat(P));return n
}),[P,h,e.guild,E,_,R]),H=o.useMemo((function(){return k?W:w.concat(W)}),[W,w,k]),G=o.useMemo((function(){var e={},t=r.default.chain(W).filter((function(e){return!!e.listed||e.inputType===m.ApplicationCommandInputType.BUILT_IN||e.inputType===m.ApplicationCommandInputType.BUILT_IN_TEXT||e.inputType===m.ApplicationCommandInputType.BUILT_IN_INTEGRATION})).groupBy((function(e){return e.applicationId})).value();!k&&w.length>0&&(t[v.BuiltInSectionId.FRECENCY]=w);var o=U.map((function(n){var o,r=null!==(o=t[n.id])&&void 0!==o?o:[];n.type===m.ApplicationCommandSectionType.BUILT_IN&&(e[n.id]=r.length);return{data:r,section:n,key:n.id}})).filter((function(e){return(null==O||e.section.id===O)&&e.data.length>0}));if(o.length>0){var i,a;(i=o[0].data).unshift.apply(i,B);(a=o[o.length-1].data).push.apply(a,F)}var u=o.reduce((function(e,t){return e.concat(t.data)}),[]),l=[],d=0;U.forEach((function(t){var o,r;l.push(d);var i=null!=t.commandCountByType&&null!==(o=t.commandCountByType[n])&&void 0!==o?o:0
;d+=t.type===m.ApplicationCommandSectionType.BUILT_IN?null!==(r=e[t.id])&&void 0!==r?r:0:i}));return{discoverySections:o,sectionsOffset:l,discoveryCommands:u,builtInSectionCommandCount:e}}),[W,w,B,F,U,k,n,O]),V=G.discoverySections,Y=G.sectionsOffset,q=G.discoveryCommands;return{filteredApplicationId:O,discoverySections:V,applicationCommandSections:U,discoveryCommands:q,commands:H,guildCommands:_,sectionsOffset:Y,hasMoreBefore:k,hasMoreAfter:R}}},456206:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;!function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var o={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=r?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(o,i,a):o[i]=e[i]}o.default=e;n&&n.set(e,o)}(n(667294))
;var o,r=a(n(810919)),i=a(n(767846));function a(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function l(e,t,n,r){o||(o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={children:void 0}),1===a)t.children=r;else if(a>1){for(var u=new Array(a),l=0;l<a;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var d in i)void 0===t[d]&&(t[d]=i[d]);else t||(t=i||{});return{$$typeof:o,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var d=l(r.default,{dotRadius:4,themed:!0}),c=function(){return l("div",{className:i.default.loadingWrapper},void 0,d)};c.displayName="ApplicationCommandLoadingMenuItem";var p=c;t.default=p},159872:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0
;var o,r=N(n(667294)),i=E(n(441143)),a=E(n(496486)),u=n(536211),l=N(n(536487)),d=E(n(117883)),c=E(n(473517)),p=n(905043),f=n(65621),s=n(153823),m=E(n(462936)),y=n(807149),v=n(396229),g=E(n(456206)),h=n(145122),I=n(567186),A=E(n(644263)),T=E(n(30098)),C=E(n(689389)),_=E(n(728429)),O=n(770348),M=n(484278),b=E(n(247001)),S=E(n(929945));function E(e){return e&&e.__esModule?e:{default:e}}function P(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(P=function(e){return e?n:t})(e)}function N(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=P(t);if(n&&n.has(e))return n.get(e);var o={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=r?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(o,i,a):o[i]=e[i]}o.default=e;n&&n.set(e,o);return o}function D(e,t,n,r){
o||(o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={children:void 0}),1===a)t.children=r;else if(a>1){for(var u=new Array(a),l=0;l<a;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var d in i)void 0===t[d]&&(t[d]=i[d]);else t||(t=i||{});return{$$typeof:o,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var L=a.default.debounce((function(e,t,n,o,r,i){l.getApplicationDiscoveryCommands(e,t,n,!1,o,r,i)}),100,{maxWait:100}),j=D(g.default,{}),w=function(e,t,n,o,a){var g=r.useRef(!1),E=(0,u.useStateFromStoresObject)([A.default,T.default],(function(){var e=A.default.getChannel(n);return{channel:e,guild:T.default.getGuild(null!=o?o:null==e?void 0:e.guild_id)}})),P=E.channel,N=E.guild,w=r.useCallback((function(t,n,o){void 0===o&&(o=M.DISCOVERY_COMMANDS_QUERY_LIMIT);(null==N?void 0:N.id)&&L(null==N?void 0:N.id,t,o,!1,e,n)}),[N,e]),U=function(e,t,n){r.useEffect((function(){var o
;if(null!=(null==n?void 0:n.id)&&(null==n||null===(o=n.applicationCommandCounts)||void 0===o?void 0:o[e])>0)l.queryGuildApplications(null==n?void 0:n.id,15,e);else if((null==t?void 0:t.type)===O.ChannelTypes.DM){var r=_.default.getUser(t.getRecipientId());!0===(null==r?void 0:r.bot)&&null==d.default.getCommands(r.id,e)&&l.queryDmApplicationCommands(r.id,e)}}),[t,e,n]);var o=(0,y.useApplicationCommandsDiscoveryState)({channel:t,guild:n},1,e),i=o.discoveryCommands,a=o.hasMoreAfter,u=o.guildCommands;return{visible:r.useMemo((function(){var o,r=(null==t?void 0:t.type)===O.ChannelTypes.DM;return null!=t&&(r||C.default.can(O.Permissions.USE_APPLICATION_COMMANDS,t))&&(0,I.isTextChannel)(t.type)&&!t.isArchivedThread()&&(r&&i.length>0||(null!==(o=null==n?void 0:n.applicationCommandCounts[e])&&void 0!==o?o:0)>0)}),[t,e,null==n?void 0:n.applicationCommandCounts,i.length]),discoveryCommands:i,hasMoreAfter:a,guildCommands:u}
}(e,P,N),x=U.visible,k=U.discoveryCommands,R=U.hasMoreAfter,B=U.guildCommands;r.useEffect((function(){if(x!==g.current){x&&(null==a||a());g.current=x}}),[x,a]);r.useEffect((function(){(null==B?void 0:B.isStale)&&w(0,{sectionId:null,offset:0})}),[null==B?void 0:B.isStale,w]);var F=r.useCallback((function(e){null!=B&&!B.loadingMore&&R&&e+500>34*k.length-40&&w(B.bottomOffset+1)}),[k.length,R,B,w]),W=r.useCallback((function(e){if(e.inputType===f.ApplicationCommandInputType.PLACEHOLDER)return D(h.MenuItem,{id:"menu-command-"+e.id,render:function(){return j}},"menu-command-"+e.id);if(null!=P){var n=(0,p.getCommandSection)(e.applicationId,c.default,_.default,P),o=null!=n?(0,v.getIconComponent)(n):void 0;return D(h.MenuItem,{id:e.id,label:e.name,showIconFirst:!0,disabled:!(0,s.hasAccess)(e),icon:function(){return null!=o?D(o,{channel:P,section:n,width:18,height:18,selectable:!1}):null},action:function(){(0,
i.default)(!P.isArchivedThread(),"Context menu commands cannot be run on archived threads.");(0,m.default)(e,{},{channel:P,guild:N},t)}},e.id)}return null}),[P,N,t]);return x&&D(h.MenuItem,{id:"apps",label:b.default.Messages.APPS,onChildrenScroll:F,childRowHeight:34,listClassName:S.default.list},void 0,k.map(W))};t.default=w},96763:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=p;var o,r,i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var o={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=r?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(o,i,a):o[i]=e[i]}o.default=e;n&&n.set(e,o);return o}(n(667294)),a=(o=n(468205))&&o.__esModule?o:{default:o},u=["width","height","color","foreground"];function l(e){
if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function d(){d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};return d.apply(this,arguments)}function c(e,t,n,o){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={children:void 0}),1===a)t.children=o;else if(a>1){for(var u=new Array(a),l=0;l<a;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var d in i)void 0===t[d]&&(t[d]=i[d]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function p(e){var t=e.width,n=void 0===t?24:t,o=e.height,r=void 0===o?24:o,l=e.color,p=void 0===l?"currentColor":l,f=e.foreground,s=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++){n=i[o]
;t.indexOf(n)>=0||(r[n]=e[n])}return r}(e,u);return i.createElement("svg",d({},(0,a.default)(s),{width:n,height:r,viewBox:"0 0 24 24"}),c("path",{className:f,fill:p,fillRule:"evenodd",clipRule:"evenodd",d:"M5 2C3.34315 2 2 3.34315 2 5V19C2 20.6569 3.34315 22 5 22H19C20.6569 22 22 20.6569 22 19V5C22 3.34315 20.6569 2 19 2H5ZM8.79741 7.72V16H6.74541V7.72H8.79741ZM13.2097 7.72C16.0897 7.72 17.5897 9.388 17.5897 11.848C17.5897 14.308 16.0537 16 13.2577 16H10.3537V7.72H13.2097ZM13.1497 14.404C14.6137 14.404 15.5257 13.636 15.5257 11.86C15.5257 10.12 14.5537 9.316 13.1497 9.316H12.4057V14.404H13.1497Z"}))}p.displayName="CopyID"}}]);
//# sourceMappingURL=318638ade4925b7f0160.js.map