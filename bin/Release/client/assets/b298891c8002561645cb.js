(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[15865],{452668:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.loadInviteSuggestions=function(e,t,n){return(0,r.fetchUserAffinities)().then((function(){l.default.dispatch({type:o.ActionTypes.LOAD_INVITE_SUGGESTIONS,omitUserIds:null!=e?e:new Set,guild:t,channel:n})}))};t.searchInviteSuggestions=function(e){l.default.dispatch({type:o.ActionTypes.INVITE_SUGGESTIONS_SEARCH,query:e})};var a,l=(a=n(636602))&&a.__esModule?a:{default:a},r=n(314022),o=n(770348)},115865:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=t.InviteRow=t.InviteCopyInputConnected=void 0
;var a,l=ge(n(667294)),r=ve(n(294184)),o=ve(n(441143)),i=ve(n(496486)),s=n(47354),u=ge(n(536211)),d=n(91817),f=ve(n(23170)),c=n(452668),p=ve(n(530025)),v=ge(n(327169)),h=n(460784),g=ve(n(250490)),I=n(678928),E=n(341186),_=n(283894),m=n(10614),y=ve(n(860593)),T=n(463893),S=n(760291),N=ve(n(750064)),C=ve(n(217964)),M=ve(n(607209)),A=ge(n(778548)),O=ve(n(644263)),R=ve(n(517286)),w=ve(n(729748)),L=ve(n(739417)),D=ve(n(689389)),b=ve(n(788739)),x=ve(n(290629)),F=ve(n(211136)),P=ve(n(790597)),U=ve(n(663303)),V=ve(n(871778)),k=ve(n(728429)),B=ve(n(487372)),G=ve(n(151097)),H=ve(n(956117)),j=ve(n(16941)),K=n(737705),W=ve(n(530250)),z=ve(n(665759)),Y=ve(n(567668)),q=ve(n(279950)),Z=ve(n(730977)),Q=n(688388),$=ve(n(634230)),X=n(3400),J=ge(n(628551)),ee=n(967965),te=ve(n(776360)),ne=ve(n(308920)),ae=ge(n(303763)),le=n(179495),re=n(770348),oe=n(738681),ie=ve(n(247001)),se=ve(n(12977)),ue=ve(n(3066)),de=ve(n(380203)),fe=ve(n(234532)),ce=ve(n(641501)),pe=ve(n(457890));function ve(e){
return e&&e.__esModule?e:{default:e}}function he(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(he=function(e){return e?n:t})(e)}function ge(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=he(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e;n&&n.set(e,a);return a}function Ie(){Ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};return Ie.apply(this,arguments)}function Ee(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;_e(e,t)}function _e(e,t){_e=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e}
;return _e(e,t)}function me(e,t,n,l){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=l;else if(o>1){for(var i=new Array(o),s=0;s<o;s++)i[s]=arguments[s+3];t.children=i}if(t&&r)for(var u in r)void 0===t[u]&&(t[u]=r[u]);else t||(t=r||{});return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var ye=ae.default.getMaxAgeOptions,Te=ae.default.getMaxUsesOptions,Se=ae.default.INVITE_OPTIONS_FOREVER,Ne=ae.default.INVITE_OPTIONS_7_DAYS,Ce=ae.default.INVITE_OPTIONS_UNLIMITED,Me=(0,_.registerUserExperiment)({id:_.Experiments.INVITE_EMPTY_STATE_IMAGES,title:"Invite Empty State image swap",description:["Adds new images when the user has no invite suggestions","Control: no image","Treatment 1: high five art","Treatment 2: envelope art"],buckets:[_.ExperimentBuckets.CONTROL,_.ExperimentBuckets.TREATMENT_1,_.ExperimentBuckets.TREATMENT_2]})
;function Ae(){switch((0,_.useAndTrackExposureToUserExperiment)(Me)){case _.ExperimentBuckets.TREATMENT_1:return me("div",{className:(0,r.default)(se.default.inviteNoResultsImage,se.default.highFive)});case _.ExperimentBuckets.TREATMENT_2:return me("div",{className:(0,r.default)(se.default.inviteNoResultsImage,se.default.envolope)});default:return null}}var Oe=function(e){Ee(t,e);function t(){for(var t,n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];(t=e.call.apply(e,[this].concat(a))||this).state={sending:!1,invited:!1,hovered:!1};t.handleMouseEnter=function(){t.setState({hovered:!0})};t.handleMouseLeave=function(){t.setState({hovered:!1})};t.handleClickInvite=function(){var e,n=t.props,a=n.user,l=n.channel,r=n.location,o=n.inviteKey,i=n.row;if(null!=o){var s,u={inviteKey:o,location:r,suggested:null!==(e=null!=i?L.default.getSelectedInviteMetadata(i):null)&&void 0!==e?e:null};null!=l?s=Ie({type:v.InvitePropertiesType.GROUP_DM,channel:l},u):null!=a&&(s=Ie({
type:v.InvitePropertiesType.USER,user:a},u));if(null!=s){t.setState({sending:!0});v.default.enqueue(s,(function(e){t.setState({sending:!1,invited:e})}))}}};return t}var n=t.prototype;n.shouldComponentUpdate=function(e,t){return this.state.sending!==t.sending||this.state.invited!==t.invited||this.state.hovered!==t.hovered||this.props.user!==e.user||this.props.channel!==e.channel};n.renderUserOrChannel=function(){var e,t,n=this.props,a=n.user,l=n.channel;if(null!=a){e=a.getAvatarURL(null==l?void 0:l.guild_id,32);t=a.username}else if(null!=l){e=(0,h.getChannelIconURL)(l);t=(0,I.computeChannelName)(l,k.default,x.default)}return null==e||null==t?null:me(J.default,{src:e,"aria-label":t,size:J.Sizes.SIZE_32,className:se.default.inviteRowAvatar})};n.render=function(){var e,t=this.props,n=t.user,a=t.channel,l=this.state,r=l.sending,o=l.invited,i=l.hovered;e=o?me(H.default,{look:H.default.Looks.LINK,size:H.default.Sizes.SMALL,disabled:!0,
color:V.default.theme===re.ThemeTypes.DARK?H.default.Colors.WHITE:H.default.Colors.BLACK},void 0,ie.default.Messages.INVITE_FRIEND_MODAL_SENT):me(H.default,{color:H.default.Colors.GREEN,look:i?H.default.Looks.FILLED:H.default.Looks.OUTLINED,className:se.default.inviteRowButton,size:H.default.Sizes.SMALL,submitting:r,onClick:this.handleClickInvite},void 0,ie.default.Messages.INVITE_FRIEND_MODAL_INVITE);return me("div",{className:se.default.inviteRow,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},void 0,me("div",{className:se.default.inviteRowInfo},void 0,this.renderUserOrChannel(),me("div",{className:se.default.inviteRowName},void 0,null!=n?n.toString():null,null!=a?(0,I.computeChannelName)(a,k.default,x.default):null)),e)};return t}(l.Component);t.InviteRow=Oe;Oe.displayName="InviteRow";var Re=function(e){Ee(t,e);function t(){for(var t,n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];(t=e.call.apply(e,[this].concat(a))||this).state={focused:!1,
copied:!1};t._unsetCopiedState=new d.DelayedCall(1e3,(function(){return t.setState({copied:!1})}));t.handleCopy=function(){var e=t.props,n=e.value,a=e.onCopy;t.setState({copied:!0});t._unsetCopiedState.delay();a(n)};return t}var n=t.prototype;n.componentWillUnmount=function(){this._unsetCopiedState.cancel()};n.render=function(){var e,t=this,n=this.props,a=n.value,l=n.autoFocus,o=n.hideValue,i=this.state,s=i.focused,u=i.copied;return me("div",{className:(0,r.default)(ce.default.input,ue.default.flexJustifyBetween,ue.default.flexCenter,(e={},e[ce.default.success]=u,e[ce.default.focused]=s,e))},void 0,me(q.default,{className:se.default.copyInput,name:"invite",value:o?ie.default.Messages.INSTANT_INVITE_HIDDEN:a,editable:!1,inputClassName:se.default.noBorder,autoFocus:l,onFocus:function(){return l?t.setState({focused:!0}):null},onBlur:function(){return l?t.setState({focused:!1}):null},spellCheck:"false",onClick:function(e){return e.currentTarget.select()},
"aria-label":ie.default.Messages.FORM_LABEL_INVITE_LINK}),le.SUPPORTS_COPY?me(H.default,{size:H.default.Sizes.SMALL,color:u?H.default.Colors.GREEN:H.default.Colors.BRAND,className:se.default.copyButton,onClick:this.handleCopy},void 0,u?ie.default.Messages.INVITE_COPIED:ie.default.Messages.COPY):null)};return t}(l.PureComponent);Re.displayName="InviteCopyInput";function we(e){var t=e.error;return me(te.default,{className:se.default.errorMessage,size:te.default.Sizes.SIZE_12,color:te.default.Colors.STATUS_RED},void 0,t.getAnyErrorMessage())}we.displayName="InviteErrorMessage";var Le=u.default.connectStores([U.default],(function(){return{hideValue:U.default.hideInstantInvites}}))(Re);t.InviteCopyInputConnected=Le;var De=me(y.default,{}),be=me(Ae,{}),xe=function(e){Ee(t,e);function t(t){var n;(n=e.call(this,t)||this)._scroller=null;n._headerId=i.default.uniqueId();n.handleGenerateNewLink=function(){var e=n.props,t=e.channel,a=e.source,l=null!=t?t.id:F.default.getChannelId();if(null!=l){
n.setState({networkError:void 0});f.default.createInvite(l,{max_age:n.state.maxAge,max_uses:n.state.maxUses,temporary:n.state.temporary},a).catch((function(e){return n.setState({networkError:e})}))}n.state.maxAge===Se.value||n.state.savedMaxAge===Se.value?n.setState({settingsOpen:!1}):n.setState({settingsOpen:!1,savedMaxAge:Se.value})};n.handleCopy=function(e){var t=n.props,a=t.channel,l=t.source,r=t.code,o=t.guildScheduledEvent;(0,le.copy)(e);var i,s=null!=a?a.id:F.default.getChannelId();if(null!=a)i=a.type;else{var u=O.default.getChannel(s);null!=u&&(i=u.type)}ne.default.track(re.AnalyticEvents.COPY_INSTANT_INVITE,{server:P.default.getGuildId(),channel:s,channel_type:i,location:l,code:r,guild_scheduled_event_id:null==o?void 0:o.id})};n.openSettings=function(){n.setState({settingsOpen:!0})};n.handleSelectMaxAge=function(e){n.setState({maxAge:e,savedMaxAge:n.state.maxAge})};n.handleSelectMaxUses=function(e){n.setState({maxUses:e})};n.handleToggleTemporary=function(e){n.setState({
temporary:e})};n.handleQueryChange=function(e){var t;null===(t=n._scroller)||void 0===t||t.scrollTo({to:0});(0,c.searchInviteSuggestions)(e);n.setState({query:e})};n.handleClearSearch=function(){n.handleQueryChange("")};n.handleToggleMaxAge=function(){n.setState({maxAge:n.state.savedMaxAge,savedMaxAge:n.state.maxAge},n.handleGenerateNewLink)};n.handleDone=function(){var e=n.props,t=e.onDone,a=e.onClose;n.state.settingsOpen?n.setState({settingsOpen:!1}):a();null==t||t()};n.getRowHeight=function(e,t){if(e>0)return 0;switch(n.props.rows[t].type){case ae.RowTypes.GROUP_DM:case ae.RowTypes.DM:case ae.RowTypes.FRIEND:return 44;default:return 0}};n.renderRow=function(e){var t=e.section,a=e.row;if(t>0)return null;var l=n.props.analyticsLocation,r=n.getInviteKey(),o=n.props.rows[a],i=o.type+"-"+o.item.id;switch(o.type){case ae.RowTypes.GROUP_DM:return me(Oe,{row:o,channel:o.item,inviteKey:r,location:l},i);case ae.RowTypes.DM:case ae.RowTypes.FRIEND:return me(Oe,{row:o,user:o.item,inviteKey:r,
location:l},i);default:return null}};var a=t.maxAge,l=t.maxUses,r=t.temporary,o=t.forceSettings,s=t.guild.hasFeature(re.GuildFeatures.HUB)?Se:Ne;n.state={query:"",settingsOpen:!0===o,maxAge:null!=a?a:s.value,savedMaxAge:a===Se.value?s.value:Se.value,maxUses:null!=l&&0!==l?l:Ce.value,temporary:null!=r&&r,networkError:void 0};return n}var n=t.prototype;n.componentDidMount=function(){var e=this,t=this.props,n=t.channel,a=t.code,l=t.guild,r=t.source,o=t.canCreateInvites,i=t.analyticsLocation,s=t.streamUserId,u=t.targetType,d=t.targetUserId,c=t.applicationId,p=t.initialCounts,v=t.rows,h=t.showFriends,g=this.state,I=g.maxAge,E=g.maxUses,_=g.temporary;if(o){var y=null!=n?n.id:F.default.getChannelId();if(null==y)return;this.setState({networkError:void 0});f.default.createInvite(y,{validate:null!=a?a:null,max_age:I,max_uses:E,target_user_id:d,target_type:u,target_application_id:c,temporary:_},r).catch((function(t){return e.setState({networkError:t})}))}
h&&ne.default.track(re.AnalyticEvents.INVITE_SUGGESTION_OPENED,{location:r,num_suggestions:v.length,num_friends:p.numFriends,num_dms:p.numDms,num_group_dms:p.numGroupDms,guild_id:l.id});if(null!=s){var T=M.default.getStreamForUser(s),S=(0,m.getStreamerApplication)(T,b.default);ne.default.track(re.AnalyticEvents.OPEN_MODAL,{type:"Send Stream Invite",source:r,location:i,other_user_id:s,application_id:null!=S?S.id:null,application_name:null!=S?S.name:null,game_id:null!=S?S.id:null})}else null!=c||ne.default.track(re.AnalyticEvents.OPEN_MODAL,{type:"Instant Invite Modal",source:r,location:i})};n.getInviteKey=function(){var e=this.props,t=e.code,n=e.vanityURLCode,a=e.guildScheduledEvent,l=null!=t?t:n;return null==l?l:(0,T.generateInviteKeyFromExtraData)({baseCode:l,guildScheduledEventId:null==a?void 0:a.id})};n.renderChannelWarning=function(){var e=this.props,t=e.showChannelInfo,n=e.inviteChannel,a=e.showErrorAtBottom;return t&&(0,g.default)(n)?me(te.default,{size:te.default.Sizes.SIZE_12,
color:te.default.Colors.ERROR,className:a?de.default.marginTop4:void 0},void 0,ie.default.Messages.INVITE_PRIVATE_CHANNEL_WARNING):null};n.renderCopyInput=function(){var e,t=this.props,n=t.noInvitesAvailable,a=t.showFriends,o=t.showErrorAtBottom,i=this.state,s=i.maxAge,u=i.maxUses,d=i.networkError,f=(0,N.default)(null!==(e=this.getInviteKey())&&void 0!==e?e:"");return me(l.Fragment,{},void 0,me(Le,{value:f,autoFocus:a,onCopy:this.handleCopy}),n?null:me(te.default,{size:te.default.Sizes.SIZE_12,className:(0,r.default)(de.default.marginTop8,se.default.footerText)},void 0,(0,ae.maxAgeString)(s,u)," ",a?me(G.default,{onClick:this.openSettings},void 0,ie.default.Messages.INVITE_EDIT_LINK):null),o?this.renderChannelWarning():null,null!=d?me(we,{error:d}):null)};n.renderHeader=function(){
var e,t=this.props,n=t.guild,a=t.showFriends,o=t.guildScheduledEvent,i=t.streamUserId,s=t.applicationId,u=t.welcomeToServer,d=t.channel,f=t.inviteChannel,c=t.showChannelInfo,p=t.showErrorAtBottom,v=this.state,h=v.query,g=v.settingsOpen,I=null,_=null;e=u?null:null!=i?ie.default.Messages.INVITE_STREAM_HEADER:null!=s?ie.default.Messages.EMBEDDED_ACTIVITIES_INVITE_TO_ACTIVITY:null!=o?ie.default.Messages.GUILD_EVENT_INVITE_MODAL_TITLE:(null==d?void 0:d.isGuildStageVoice())?ie.default.Messages.STAGE_CHANNEL_INVITE_TO_STAGE_MODAL_HEADER:ie.default.Messages.INVITE_TO_SERVER_NAME.format({name:n.toString()});if(c&&null!=f){var m=(0,E.getChannelIconComponent)(f,n);null!=m&&(_=me("div",{className:se.default.headerChannelContainer},void 0,me(m,{className:se.default.channelIcon}),me(te.default,{color:te.default.Colors.HEADER_SECONDARY,size:te.default.Sizes.SIZE_16},void 0,f.name)))}I=g?me(Q.FormTitle,{id:this._headerId,tag:Q.FormTitle.Tags.H2,className:(0,
r.default)(de.default.marginReset,se.default.headerCloseButtonSpacing,se.default.headerText)},void 0,ie.default.Messages.INVITE_SETTINGS_TITLE):n.hasFeature(re.GuildFeatures.HUB)?me("div",{className:se.default.hubHeader},void 0,me(te.default,{className:(0,r.default)(se.default.hubInviteTitle,se.default.headerCloseButtonSpacing),id:this._headerId,color:te.default.Colors.HEADER_PRIMARY,size:te.default.Sizes.SIZE_24},void 0,ie.default.Messages.HUB_INVITE_HEADER),me(te.default,{color:te.default.Colors.HEADER_SECONDARY,size:te.default.Sizes.SIZE_16},void 0,ie.default.Messages.HUB_INVITE_SUBHEADER),a&&me(z.default,{query:h,className:se.default.hubFriendSearch,onChange:this.handleQueryChange,placeholder:ie.default.Messages.INVITE_SEARCH_FOR_FRIENDS,"aria-label":ie.default.Messages.INVITE_SEARCH_FOR_FRIENDS,autoFocus:!0,onClear:this.handleClearSearch})):a?me("div",{className:se.default.header},void 0,me(Q.FormTitle,{id:this._headerId,tag:Q.FormTitle.Tags.H2,className:(0,
r.default)(de.default.marginBottom4,se.default.headerCloseButtonSpacing,se.default.headerText)},void 0,e),_,p?null:this.renderChannelWarning(),me(z.default,{query:h,className:se.default.searchBar,onChange:this.handleQueryChange,placeholder:ie.default.Messages.INVITE_SEARCH_FOR_FRIENDS,autoFocus:!0,onClear:this.handleClearSearch})):l.createElement(l.Fragment,null,me(Q.FormTitle,{id:this._headerId,tag:Q.FormTitle.Tags.H2,className:(0,r.default)(de.default.marginReset,se.default.headerCloseButtonSpacing,se.default.headerText)},void 0,e),_,p?null:this.renderChannelWarning());return me(X.ModalHeader,{separator:a&&!g},void 0,me(X.ModalCloseButton,{className:se.default.closeButton,onClick:this.handleDone}),me("div",{className:se.default.headerContainer},void 0,u&&!g&&l.createElement(l.Fragment,null,me("img",{className:se.default.welcomeImage,src:pe.default,alt:""}),me("h1",{className:se.default.welcomeHeading},void 0,ie.default.Messages.INVITE_WELCOME_HEADING),me("p",{
className:se.default.welcomeSubheading},void 0,ie.default.Messages.INVITE_WELCOME_SUBHEADING)),null!=i?De:null,I))};n.renderSettingsBody=function(){var e=this.state,t=e.maxAge,n=e.maxUses,a=e.temporary,l=ye.find((function(e){return e.value===t})),o=Te.find((function(e){return e.value===n}));return me(X.ModalContent,{className:se.default.settingsContent},void 0,me("form",{onSubmit:this.handleGenerateNewLink},void 0,me(Q.FormItem,{title:ie.default.Messages.EXPIRE_AFTER,className:de.default.marginTop20},void 0,me(ee.SingleSelect,{value:null==l?void 0:l.value,options:ye,onChange:this.handleSelectMaxAge})),me(Q.FormItem,{title:ie.default.Messages.MAX_NUMBER_OF_USES,className:(0,r.default)(de.default.marginTop20,de.default.marginBottom4)},void 0,me(ee.SingleSelect,{value:null==o?void 0:o.value,options:Te,onChange:this.handleSelectMaxUses})),me(Q.FormItem,{className:(0,r.default)(de.default.marginTop20,se.default.switch)},void 0,me(Y.default,{value:a,onChange:this.handleToggleTemporary,
note:ie.default.Messages.TEMPORARY_MEMBERSHIP_EXPLANATION,hideBorder:!0},void 0,me(te.default,{},void 0,ie.default.Messages.GRANT_TEMPORARY_MEMBERSHIP)))))};n.renderFriendsBody=function(){var e,t=this.props.rows,n=this.getInviteKey();0===t.length?e=ie.default.Messages.INVITE_FRIEND_MODAL_NO_RESULTS:null==n&&(e=ie.default.Messages.INVITE_FRIEND_MODAL_LOADING);return null!=e?me(X.ModalContent,{className:(0,r.default)(de.default.marginBottom20,de.default.marginTop20)},void 0,me(K.EmptyStateText,{},void 0,e)):me(X.ModalListContent,{className:se.default.scroller,sections:[t.length],renderSection:this.renderSection,sectionHeight:0,renderRow:this.renderRow,rowHeight:this.getRowHeight,paddingBottom:16})};n.renderSection=function(){return null};n.renderBody=function(){var e=this.props,t=e.guild,n=e.showFriends,a=e.streamUserId,l=e.applicationId;if(this.state.settingsOpen)return this.renderSettingsBody();if(n)return this.renderFriendsBody();var r=k.default.getCurrentUser();(0,
o.default)(null!=r,"InstantInviteModal: user cannot be undefined");var i=t.isOwner(r)?ie.default.Messages.INVITE_SHARE_LINK_OWN_SERVER:ie.default.Messages.SHARE_INVITE_LINK_FOR_ACCESS;null!=a?i=ie.default.Messages.INVITE_SHARE_LINK_TO_STREAM:null!=l&&(i=ie.default.Messages.EMBEDDED_ACTIVITIES_SHARE_LINK_TO_ACTIVITY);return me(X.ModalContent,{className:se.default.noScroll},void 0,me(W.default,{direction:W.default.Direction.VERTICAL,className:de.default.marginBottom20},void 0,be,me(te.default,{className:se.default.subText},void 0,i),this.renderCopyInput()))};n.renderFooter=function(){var e,t=this,n=this.props,a=n.noInvitesAvailable,o=n.showFriends,i=n.guildScheduledEvent,s=n.streamUserId,u=n.applicationId,d=n.channel,f=this.state,c=f.settingsOpen,v=f.maxAge,h=V.default.theme,g=null;if(c)g=me(l.Fragment,{},void 0,me(H.default,{onClick:this.handleGenerateNewLink},void 0,ie.default.Messages.GENERATE_A_NEW_LINK),me(H.default,{look:H.default.Looks.LINK,
color:h===re.ThemeTypes.LIGHT?H.default.Colors.PRIMARY:H.default.Colors.WHITE,onClick:this.handleDone},void 0,ie.default.Messages.CANCEL));else if(o){var I=ie.default.Messages.INVITE_FOOTER_LINK_HEADER;null!=s?I=ie.default.Messages.INVITE_STREAM_FOOTER_LINK_HEADER:null!=u?I=ie.default.Messages.EMBEDDED_ACTIVITIES_INVITE_ACTIVITY_FOOTER_LINK_HEADER:null!=i?I=ie.default.Messages.GUILD_EVENT_INVITE_MODAL_FOOTER:(null==d?void 0:d.isGuildStageVoice())&&(I=ie.default.Messages.STAGE_CHANNEL_INVITE_TO_STAGE_MODAL_FOOTER);g=me(W.default,{direction:W.default.Direction.VERTICAL,className:se.default.content},void 0,me(Q.FormTitle,{tag:Q.FormTitle.Tags.H5,className:de.default.marginBottom8},void 0,I),this.renderCopyInput())}else a||(g=me(W.default,{justify:W.default.Justify.BETWEEN,className:de.default.marginTop20},void 0,me(p.default,{checked:v===Se.value,onChange:this.handleToggleMaxAge},void 0,me(te.default,{className:se.default.checkBoxLabel
},void 0,ie.default.Messages.SET_INVITE_LINK_NEVER_EXPIRE)),me(Z.default,{text:ie.default.Messages.LINK_SETTINGS},void 0,(function(e){var n=e.onMouseEnter,a=e.onMouseLeave;return me(j.default,{onClick:t.openSettings,onMouseEnter:n,onMouseLeave:a,className:fe.default.cursorPointer},void 0,me($.default,{width:18,height:18,color:re.Colors.PRIMARY_DARK_400}))}))));return null!=g?me(X.ModalFooter,{className:c?se.default.settingsFooter:(0,r.default)((e={},e[se.default.noPadding]=!o,e[se.default.footer]=o,e))},void 0,g):null};n.render=function(){var e=this.props,t=e.transitionState,n=e.channel,a=e.guild;return me("div",{className:this.props.showFriends?se.default.wrapper:void 0},void 0,me(X.ModalRoot,{impressionName:s.ImpressionNames.GUILD_INVITE,impressionProperties:{invite_channel_id:null==n?void 0:n.id,invite_guild_id:a.id},"aria-labelledby":this._headerId,transitionState:t,className:se.default.modal},void 0,this.renderHeader(),this.renderBody(),this.renderFooter()))};return t
}(l.PureComponent);xe.displayName="InstantInviteModal";xe.defaultProps={analyticsLocation:re.AnalyticsLocations.GUILD_CREATE_INVITE_SUGGESTION};var Fe=l.forwardRef((function(e,t){var n=e.channel,a=e.guild,r=e.source,o=e.guildScheduledEvent,i=e.streamUserId,s=e.applicationId,d=e.transitionState,f=e.onClose,p=e.welcomeToServer,v=e.forceSettings,h=e.analyticsLocation,g=(0,u.useStateFromStores)([F.default,O.default,R.default],(function(){var e,t;if(null!=n)return n;var l=O.default.getChannel(F.default.getChannelId());(null===(e=l)||void 0===e?void 0:e.isThread())&&(l=O.default.getChannel(l.parent_id));return null!==(t=l)&&void 0!==t?t:R.default.getDefaultChannel(a.id)}),[n,a.id]),I=null;null!=i?I=oe.InviteTargetTypes.STREAM:null!=s&&(I=oe.InviteTargetTypes.EMBEDDED_APPLICATION);var E=i,_=s,m=null!=n?n.getGuildId():null!=a?a.id:null,y=(0,u.useStateFromStoresArray)([L.default,w.default,B.default,A.default],(function(){var e=null!=g?g.id:null
;return[L.default.getInviteSuggestionRows(),L.default.getTotalSuggestionsCount()>=1,L.default.getInitialCounts(),null!=e?w.default.getInvite(e,{targetType:I,targetUserId:E,targetApplicationId:_}):null,null!=n&&null!=g?B.default.getVoiceStatesForChannel(g):null,null!=m?A.default.getProps(m,e):null]}),[g,I,E,m]),T=y[0],N=y[1],M=y[2],b=y[3],x=y[4],P=y[5],U=(0,u.useStateFromStores)([D.default],(function(){return null!=g&&D.default.can(re.Permissions.CREATE_INSTANT_INVITE,g)}),[g]),V=null===b||!U,k=l.useState((function(){var e=new Set;null!=i&&null!=x?x.forEach((function(t){var n=t.user;e.add(n.id)})):null!=m&&null!=P&&P.rows.forEach((function(t){t.type===A.MemberListRowTypes.MEMBER&&e.add(t.userId)}));return e}))[0],G=null==n?void 0:n.id,H=(0,u.useStateFromStores)([C.default],(function(){return C.default.getStageInstanceByChannel(G)}),[G]);l.useEffect((function(){(0,c.loadInviteSuggestions)(k,a,n).catch(re.NOOP_NULL)}),[k,n,a])
;var j=null!=b?b.code:void 0,K=null!=b?b.maxAge:void 0,W=null!=b?b.maxUses:void 0,z=null!=b?b.temporary:void 0,Y=V?a.vanityURLCode:void 0;U||null==(null==H?void 0:H.invite_code)||(j=H.invite_code);var q=(0,S.useInviteCreateModalChannelExperiment)(a.id),Z=q.showChannelInfo,Q=q.showErrorAtBottom;return l.createElement(xe,{ref:t,canCreateInvites:U,noInvitesAvailable:V,channel:n,inviteChannel:g,guild:a,guildScheduledEvent:o,streamUserId:i,vanityURLCode:Y,targetType:I,targetUserId:E,applicationId:s,rows:T,showFriends:N,initialCounts:M,code:j,maxAge:K,maxUses:W,temporary:z,source:r,welcomeToServer:p,forceSettings:v,analyticsLocation:h,transitionState:d,onClose:f,showChannelInfo:Z,showErrorAtBottom:Q})}));t.default=Fe},327169:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=t.InvitePropertiesType=void 0;var a=s(n(709403)),l=s(n(786345)),r=s(n(791548)),o=s(n(644263)),i=s(n(805780));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){
u=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return u(e,t)}var d;t.InvitePropertiesType=d;!function(e){e[e.GROUP_DM=0]="GROUP_DM";e[e.USER=1]="USER"}(d||(t.InvitePropertiesType=d={}));var f=new(function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;u(e,t)}(t,e);function t(){return e.call(this,new r.default("InviteQueue"),1010)||this}var n=t.prototype;n._sendInvite=function(e,t,n,a,r){l.default.sendInvite(e.id,t,n,a).then((function(){return r(null,!0)}),(function(){return r(null,!1)}))};n.drain=function(e,t){var n=this,l=e.inviteKey,r=e.location,i=e.suggested;switch(e.type){case d.GROUP_DM:this._sendInvite(e.channel,l,r,i,t);break;case d.USER:a.default.ensurePrivateChannel(e.user.id).then((function(e){var a=o.default.getChannel(e);null!=a&&n._sendInvite(a,l,r,i,t)}),(function(){return t(null,!1)}))}};return t}(i.default));t.default=f},860593:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0
;var a,l,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e;n&&n.set(e,a);return a}(n(667294)),o=n(370405),i=n(91817),s=n(864489),u=(a=n(247001))&&a.__esModule?a:{default:a};function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function f(e,t,n,a){l||(l="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var i=new Array(o),s=0;s<o;s++)i[s]=arguments[s+3];t.children=i}
if(t&&r)for(var u in r)void 0===t[u]&&(t[u]=r[u]);else t||(t=r||{});return{$$typeof:l,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(e,a.key,a)}}function p(e,t){p=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return p(e,t)}var v=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;p(e,t)}(t,e);function t(){for(var t,n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];(t=e.call.apply(e,[this].concat(a))||this)._flashTitleInterval=new i.Interval;t.state={titleIndex:null};t.handleFocus=function(){t._flashTitleInterval.stop();t.setState({titleIndex:null});document.removeEventListener("focusin",t.handleFocus)};t.rotateTitle=function(){var e=t.state.titleIndex;if(document.hasFocus()){t._flashTitleInterval.stop();t.setState({titleIndex:null})}else t.setState({
titleIndex:(e+1)%t.titles.length})};return t}var n=t.prototype;n.componentDidMount=function(){if(!s.isPlatformEmbedded&&!document.hasFocus()){this.setState({titleIndex:0});this._flashTitleInterval.start(1e3,this.rotateTitle);document.addEventListener("focusin",this.handleFocus)}};n.componentWillUnmount=function(){this._flashTitleInterval.stop();document.removeEventListener("focusin",this.handleFocus)};n.render=function(){return null!=this.title?f(o.Helmet,{},void 0,f("title",{},void 0,this.title)):null};!function(e,t,n){t&&c(e.prototype,t);n&&c(e,n);Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"titles",get:function(){return[u.default.Messages.GO_LIVE_HEY,u.default.Messages.GO_LIVE_LOOK,u.default.Messages.GO_LIVE_LISTEN]}},{key:"title",get:function(){var e=this.state.titleIndex;return null!=e?this.titles[e]:null}}]);return t}(r.PureComponent);t.default=v;v.displayName="TitleFocusFlasher"},760291:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})
;t.useInviteCreateModalChannelExperiment=t.InviteCreateModalChannelExperiment=void 0;var a,l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e;n&&n.set(e,a);return a}(n(667294)),r=n(373505),o=(a=n(247001))&&a.__esModule?a:{default:a};function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}var s=(0,r.createExperiment)({kind:"guild",id:"2022-01_invite_create_modal_channel",label:"Invite Create Modal Channel Info",defaultConfig:{showChannelInfo:!1,showErrorAtBottom:!1},treatments:[{id:1,
label:"Show channel info on instant invite create modal with possible warning at top of modal",config:{showChannelInfo:!0,showErrorAtBottom:!1}},{id:2,label:"Show channel info on instant invite create modal with possible warning at bottom of modal",config:{showChannelInfo:!0,showErrorAtBottom:!0}}]});t.InviteCreateModalChannelExperiment=s;t.useInviteCreateModalChannelExperiment=function(e){var t=o.default.getLocale(),n=["en-US","en-GB"].includes(t);l.useEffect((function(){n&&s.trackExposure({guildId:e})}),[e,n]);return s.useExperiment({guildId:e},{disable:!n})}},739417:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var a,l=d(n(536211)),r=d(n(636602)),o=n(303763),i=d(n(290629)),s=d(n(538983)),u=n(770348);function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t){f=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return f(e,t)}function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]
;if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var v,h,g,I,E=new Set,_=[],m=new Map;function y(e){var t=new Set,n=null==I?void 0:I.id,a=(0,o.getMostRecentDMedUser)(E,n);null==a||i.default.isBlocked(a.id)||t.add(a.id);for(var l,r=c(s.default.getUserAffinities());!(l=r()).done;){
var u=l.value.user_id;i.default.isBlocked(u)||t.add(u)}return(0,o.generateRowsForQuery)(e,E,t,100,n)}function T(e){_=e;m=new Map;e.forEach((function(e,t){m.set(e,{index:t})}))}var S=new(function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;f(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}var n=t.prototype;n.getInviteSuggestionRows=function(){return _};n.getTotalSuggestionsCount=function(){return h};n.getInitialCounts=function(){return v};n.getSelectedInviteMetadata=function(e){var t=m.get(e),n=s.default.getUserAffinitiesUserIds();return null!=t?{rowNum:t.index,isAffinitySuggestion:e.isSuggested,numTotal:_.length,numAffinityConnections:n.size,isFiltered:g}:null};return t}(l.default.Store))(r.default,((a={})[u.ActionTypes.LOAD_INVITE_SUGGESTIONS]=function(e){var t=e.omitUserIds,n=e.guild,a=e.channel;I=null==a?n:null;E=t;g=!1;var l=y(""),r=l.rows,o=l.counts;T(r);v=o;h=_.length},a[u.ActionTypes.INVITE_SUGGESTIONS_SEARCH]=function(e){
var t=e.query;g=""!==t;T(y(t).rows)},a));t.default=S},457890:(e,t,n)=>{e.exports=n.p+"cf3e2e7f108d20c8d804a13c9067f5a6.svg"}}]);
//# sourceMappingURL=b298891c8002561645cb.js.map