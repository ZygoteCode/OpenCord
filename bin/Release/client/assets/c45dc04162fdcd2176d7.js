"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[71667,20812],{990440:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var a=n(47354),r=n(377371),l=u(n(636602)),s=u(n(845957)),i=u(n(351772)),o=n(770348);function u(e){return e&&e.__esModule?e:{default:e}}var d={open:function(e,t,n,a){l.default.dispatch({type:o.ActionTypes.CREATE_CHANNEL_MODAL_OPEN,channelType:e,guildId:t,categoryId:n,cloneChannelId:a})},close:function(){l.default.dispatch({type:o.ActionTypes.CREATE_CHANNEL_MODAL_CLOSE})},createChannel:function(e,t,n,u,d,c,f,p,h){var E=this;void 0===u&&(u=[]);l.default.dispatch({type:o.ActionTypes.CREATE_CHANNEL_MODAL_SUBMIT});var C={type:t,name:n,permission_overwrites:u};null!=d&&d!==o.BITRATE_DEFAULT&&(C.bitrate=d);null!=c&&c>0&&(C.user_limit=c);null!=f&&(C.parent_id=f);if(t===o.ChannelTypes.GUILD_STORE){if(null==p)throw new Error("Unexpected missing SKU");C.sku_id=p;C.branch_id=h}return i.default.post({
url:o.Endpoints.GUILD_CHANNELS(e),body:C,oldFormErrors:!0,trackedActionData:{event:a.NetworkActionNames.CHANNEL_CREATE,properties:function(e){var t,n;return(0,r.exact)({is_private:u.length>0,channel_id:null==e||null===(t=e.body)||void 0===t?void 0:t.id,channel_type:null==e||null===(n=e.body)||void 0===n?void 0:n.type})}}}).then((function(t){E.close();s.default.checkGuildTemplateDirty(e);return t}),(function(e){l.default.dispatch({type:o.ActionTypes.CREATE_CHANNEL_MODAL_SUBMIT_FAILURE,errors:e.body});throw e}))}};t.default=d},465959:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var a,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var s=r?Object.getOwnPropertyDescriptor(e,l):null
;s&&(s.get||s.set)?Object.defineProperty(a,l,s):a[l]=e[l]}a.default=e;n&&n.set(e,a);return a}(n(667294)),l=d(n(536211)),s=n(881100),i=d(n(359012)),o=n(967965),u=d(n(247001));function d(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function f(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var l=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),1===s)t.children=r;else if(s>1){for(var i=new Array(s),o=0;o<s;o++)i[o]=arguments[o+3];t.children=i}if(t&&l)for(var u in l)void 0===t[u]&&(t[u]=l[u]);else t||(t=l||{});return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function p(e,t){p=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return p(e,t)}var h=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;p(e,t)}(t,e);function t(){
for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];(t=e.call.apply(e,[this].concat(a))||this).handleChange=function(e){t.props.onChange(e)};return t}var n=t.prototype;n.componentDidMount=function(){var e=this.props,t=e.applicationId,n=e.branches,a=e.onHasBranchesChange;(0,s.fetchBranchesForApplication)(t);null==a||a(n.length>0)};n.componentDidUpdate=function(e){var t=this.props,n=t.onHasBranchesChange,a=t.branches.length>0;null!=n&&a!==e.branches.length>0&&n(a)};n.render=function(){var e=this.props,t=e.branches,n=e.selectedBranchId,a=e.applicationId,r=e.includeMaster,l=e.hide,s=e.className;if(0===t.length||l)return null;var i=r?t:t.filter((function(e){return e.id!==a}));return f(o.SingleSelect,{options:i.map((function(e){return{label:e.getName(a),value:e.id}})),placeholder:u.default.Messages.CREATE_STORE_CHANNEL_SELECT_BRANCH,value:n,onChange:this.handleChange,className:s})};return t}(r.Component);h.displayName="ApplicationBranchSelector";h.defaultProps={
includeMaster:!1};var E=l.default.connectStores([i.default],(function(e){var t=e.applicationId;return{branches:i.default.getBranches(t)}}))(h);t.default=E},520038:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var a,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var s=r?Object.getOwnPropertyDescriptor(e,l):null;s&&(s.get||s.set)?Object.defineProperty(a,l,s):a[l]=e[l]}a.default=e;n&&n.set(e,a);return a}(n(667294)),l=d(n(536211)),s=n(723420),i=d(n(399561)),o=n(967965),u=d(n(247001));function d(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function f(e,t,n,r){
a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var l=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),1===s)t.children=r;else if(s>1){for(var i=new Array(s),o=0;o<s;o++)i[o]=arguments[o+3];t.children=i}if(t&&l)for(var u in l)void 0===t[u]&&(t[u]=l[u]);else t||(t=l||{});return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function p(e,t){p=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return p(e,t)}var h=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;p(e,t)}(t,e);function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];(t=e.call.apply(e,[this].concat(a))||this).handleChange=function(e){t.props.onChange(e)};return t}var n=t.prototype;n.componentDidMount=function(){var e=this.props,t=e.applicationId,n=e.skus,a=e.selectedSkuId,r=e.onChange;null==n?(0,s.fetchSKUsForApplication)(t,!1):1===n.length&&null==a&&r(n[0].id)}
;n.componentDidUpdate=function(){var e=this.props,t=e.skus,n=e.selectedSkuId,a=e.onChange;null!=t&&1===t.length&&null==n&&a(t[0].id)};n.render=function(){var e=this.props,t=e.skus,n=e.selectedSkuId,a=e.className,r=null!=t&&0===t.length;return f(o.SingleSelect,{options:null!=t?t.map((function(e){return{label:e.name,value:e.id}})):[],placeholder:r?u.default.Messages.CREATE_STORE_CHANNEL_NO_SKUS:u.default.Messages.CREATE_STORE_CHANNEL_SELECT_SKU,value:n,onChange:this.handleChange,className:a,isDisabled:r})};return t}(r.Component);h.displayName="ApplicationSKUSelector";var E=l.default.connectStores([i.default],(function(e){var t=e.applicationId;return{skus:i.default.getForApplication(t)}}))(h);t.default=E},871667:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.AddMembers=Te;t.default=void 0
;var a,r,l=he(n(667294)),s=fe(n(294184)),i=fe(n(441143)),o=fe(n(496486)),u=n(47354),d=n(536211),c=fe(n(990440)),f=fe(n(415275)),p=fe(n(465959)),h=fe(n(520038)),E=n(81069),C=fe(n(844784)),_=n(678928),v=n(289371),N=n(403575),T=n(973523),A=n(139982),y=n(365744),g=n(974797),S=n(920812),m=n(567186),O=fe(n(644263)),I=fe(n(288356)),M=fe(n(876874)),R=fe(n(30098)),L=fe(n(689389)),b=fe(n(290629)),P=fe(n(728429)),D=fe(n(956117)),w=fe(n(530250)),G=he(n(20902)),H=fe(n(26172)),U=n(477537),k=fe(n(567668)),F=fe(n(279950)),B=n(354479),j=fe(n(510596)),V=fe(n(37241)),z=fe(n(662197)),x=fe(n(562796)),W=fe(n(291555)),Y=fe(n(547058)),K=fe(n(350495)),Z=fe(n(151705)),X=fe(n(999720)),$=fe(n(158495)),q=fe(n(149982)),J=fe(n(482357)),Q=fe(n(332282)),ee=fe(n(899068)),te=n(3400),ne=fe(n(971639)),ae=n(967965),re=fe(n(776360)),le=n(319986),se=fe(n(550270)),ie=n(770348),oe=n(739889),ue=n(478036),de=fe(n(247001)),ce=fe(n(740998));function fe(e){return e&&e.__esModule?e:{default:e}}function pe(e){
if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(pe=function(e){return e?n:t})(e)}function he(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=pe(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var s=r?Object.getOwnPropertyDescriptor(e,l):null;s&&(s.get||s.set)?Object.defineProperty(a,l,s):a[l]=e[l]}a.default=e;n&&n.set(e,a);return a}function Ee(e,t,n,a,r,l,s){try{var i=e[l](s),o=i.value}catch(e){n(e);return}i.done?t(o):Promise.resolve(o).then(a,r)}function Ce(e,t){Ce=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return Ce(e,t)}function _e(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var l=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),1===s)t.children=r;else if(s>1){
for(var i=new Array(s),o=0;o<s;o++)i[o]=arguments[o+3];t.children=i}if(t&&l)for(var u in l)void 0===t[u]&&(t[u]=l[u]);else t||(t=l||{});return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function ve(){ve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};return ve.apply(this,arguments)}function Ne(e,t,n,a,r){var i=[{icon:e?W.default:x.default,label:de.default.Messages.TEXT_CHANNEL,value:ie.ChannelTypes.GUILD_TEXT,description:de.default.Messages.CREATE_TEXT_CHANNEL_DESCRIPTION}];r&&i.push({icon:e?K.default:Y.default,label:de.default.Messages.FORUM_CHANNEL,value:ie.ChannelTypes.GUILD_FORUM,description:de.default.Messages.FORUM_CHANNEL_DESCRIPTION});i.push({icon:e?J.default:q.default,label:de.default.Messages.VOICE_CHANNEL,value:ie.ChannelTypes.GUILD_VOICE,description:de.default.Messages.CREATE_VOICE_CHANNEL_DESCRIPTION});n&&i.push({icon:$.default,
iconSize:24,label:de.default.Messages.NEWS_CHANNEL,value:ie.ChannelTypes.GUILD_ANNOUNCEMENT,description:de.default.Messages.CREATE_NEWS_CHANNEL_DESCRIPTION});t&&i.push({icon:ee.default,iconSize:24,label:de.default.Messages.STORE_CHANNEL,value:ie.ChannelTypes.GUILD_STORE,description:de.default.Messages.CREATE_STORE_CHANNEL_DESCRIPTION});a&&i.push({icon:Q.default,iconSize:24,label:de.default.Messages.STAGE_VOICE_CHANNEL,value:ie.ChannelTypes.GUILD_STAGE_VOICE,description:de.default.Messages.CREATE_STAGE_CHANNEL_DESCRIPTION});return i.map((function(e){var t=e.icon,n=e.iconSize,a=e.label,r=e.value,i=e.description;return{name:_e(w.default,{align:w.default.Align.CENTER},void 0,l.createElement(t,ve({},null!=n?{width:n,height:n}:null,{className:ce.default.icon,background:ce.default.background,foreground:ce.default.foreground})),_e("div",{},void 0,_e(re.default,{size:re.default.Sizes.SIZE_16,className:ce.default.radioText},void 0,a),_e(re.default,{size:re.default.Sizes.SIZE_12,
color:re.default.Colors.HEADER_SECONDARY,className:(0,s.default)(ce.default.radioText)},void 0,i))),value:r}}))}!function(e){e.CHANNEL_INFO="CHANNEL_INFO";e.ADD_MEMBERS="ADD_MEMBERS"}(r||(r={}));function Te(e){var t=e.onChange,n=e.guildId,a=e.channelType,r=e.description,s=l.useState({}),i=s[0],o=s[1],u=(0,d.useStateFromStores)([R.default],(function(){return R.default.getGuild(n)})),c=a===ie.ChannelTypes.GUILD_STAGE_VOICE;l.useEffect((function(){t(i)}),[i,t]);return null==u?null:_e(te.ModalContent,{className:ce.default.addMembersContainer},void 0,_e(N.AddMembersBody,{guild:u,channel:null,permission:c?y.MODERATE_STAGE_CHANNEL_PERMISSIONS:(0,m.getAccessPermissions)(a),pendingAdditions:i,setPendingAdditions:o,isStageChannel:c,description:r}))}Te.displayName="AddMembers";var Ae=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;Ce(e,t)}(t,e);function t(t){var n;(n=e.call(this,t)||this).headerId=(0,B.uid)();n.setInputRef=function(e){n._input=e}
;n.handleNameChange=function(e){var t=n.state.channelType;(0,m.isGuildTextChannelType)(t)&&(e=(0,le.sanitizeGuildTextChannelName)(e));n.setState({name:e})};n.handleTypeChange=function(e){var t=e.value,a=n.state.name;(0,m.isGuildTextChannelType)(t)&&(a=(0,le.sanitizeGuildTextChannelName)(a));t===ie.ChannelTypes.GUILD_STAGE_VOICE&&n.setState({isPrivate:!1});n.setState({channelType:t,name:a})};n.handlePrivacyChange=function(e){n.setState({isPrivate:e})};n.handleApplicationChange=function(e){n.setState({applicationId:e})};n.handleSKUChange=function(e){n.setState({skuId:e})};n.handleShowBranchesToggle=function(e){n.setState({showBranches:e,branchId:null})};n.handleBranchChange=function(e){n.setState({branchId:e})};n.handleHasBranchesChange=function(e){n.setState({hasBranches:e})};n.handleSubmit=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var a,r,l,s,i,u,d,f,p,h,C,_,N,T,y,g,O,I,M,R,L,b,P;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:
t.preventDefault();a=n.props,r=a.cloneChannel,l=a.categoryId,s=a.user,i=a.memberRoleIds,u=a.isAdmin,d=a.onClose,f=a.owner;p=n.state,h=p.name,C=p.pendingPermissionOverwrites,_=p.channelType,N=p.skuId,T=p.branchId,y=p.isPrivate;if(null!=(g=n.getGuildId())){e.next=6;break}return e.abrupt("return");case 6:if(null!=r){O=o.default.values(r.permissionOverwrites);I=r.bitrate;M=r.userLimit}else if(_===ie.ChannelTypes.GUILD_ANNOUNCEMENT)O=(0,le.permissionOverwritesForAnnouncement)(g);else{if(y){O=(0,le.permissionOverwritesForRoles)(g,_,[],!0);(R=(0,v.extractPermissionOverwrites)(C,_)).length>0&&(O=O.concat(R));L=null!=f&&s.id===f.id;O.some((function(e){return i.has(e.id)}))||u||L||O.push((0,le.permissionOverwriteForUser)(s.id,_))}if(_===ie.ChannelTypes.GUILD_STAGE_VOICE){O=[];Object.values(C).forEach((function(e){var t=e.row;null!=t.id&&""!==t.id&&(t.rowType===oe.RowType.ROLE?O.push((0,S.createModeratorOverwrite)(t.id,E.PermissionOverwriteType.ROLE)):t.rowType===oe.RowType.MEMBER&&O.push((0,
S.createModeratorOverwrite)(t.id,E.PermissionOverwriteType.MEMBER)))}))}}n.setState({errors:{}});e.prev=8;e.next=11;return c.default.createChannel(g,_,h,O,I,M,_!==ie.ChannelTypes.GUILD_CATEGORY?l:null,N,T);case 11:if(null!=(b=e.sent)&&201===b.status){e.next=14;break}return e.abrupt("return");case 14:P=b.body;(0,m.isGuildTextChannelType)(_)&&(0,A.transitionToGuild)(P.guild_id,P.id);d();e.next=22;break;case 19:e.prev=19;e.t0=e.catch(8);null!=e.t0.body&&"object"==typeof e.t0.body?n.setState({errors:e.t0.body}):n.setState({errors:{message:de.default.Messages.ERROR_OCCURRED_TRY_AGAIN}});case 22:case"end":return e.stop()}}),e,null,[[8,19]])})),function(){var t=this,n=arguments;return new Promise((function(a,r){var l=e.apply(t,n);function s(e){Ee(l,a,r,s,i,"next",e)}function i(e){Ee(l,a,r,s,i,"throw",e)}s(void 0)}))});return function(e){return t.apply(this,arguments)}}();var a=t.channelType,l=t.cloneChannel;n.state={channelType:null!=a?a:ie.ChannelTypes.GUILD_TEXT,name:null!=l?(0,
_.computeChannelName)(l,P.default,b.default):"",pendingPermissionOverwrites:{},isPrivate:!1,prevGuildId:t.guildId,applicationId:null,skuId:null,branchId:null,showBranches:!1,hasBranches:!1,slide:r.CHANNEL_INFO,errors:{}};n.handlePermissionOverwriteChange=n.handlePermissionOverwriteChange.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n));return n}var n=t.prototype;n.componentDidMount=function(){var e=this._input;null!=e&&e.select();var t=this.props,n=t.guildId,a=t.applications;t.canCreateStoreChannel&&null==a&&f.default.fetchApplications(n);C.default.trackWithMetadata(ie.AnalyticEvents.OPEN_MODAL,{type:"Create Channel"})};n.componentDidUpdate=function(e,t){!t.isPrivate&&this.state.isPrivate&&this.state.channelType===ie.ChannelTypes.GUILD_ANNOUNCEMENT&&this.setState({channelType:ie.ChannelTypes.GUILD_TEXT});!t.isPrivate&&this.state.isPrivate&&C.default.trackWithMetadata(ie.AnalyticEvents.OPEN_MODAL,{
type:"Create Private Channel"})};n.getGuildId=function(e){void 0===e&&(e=this.props);return e.guildId};n.canSubmit=function(){var e=this.props,t=e.canViewChannels,n=e.canConnect,a=this.state,r=a.isPrivate,l=a.channelType,s=a.skuId;return""!==a.name&&(!(r&&!(0,v.canCreatePrivateChannel)(l,t,n))&&(l!==ie.ChannelTypes.GUILD_STORE||null!=s))};n.getIconComponent=function(){var e=this.state,t=e.isPrivate,n=e.channelType;switch(n){case ie.ChannelTypes.GUILD_TEXT:return t?W.default:x.default;case ie.ChannelTypes.GUILD_FORUM:return Y.default;case ie.ChannelTypes.GUILD_VOICE:return t?J.default:q.default;case ie.ChannelTypes.GUILD_STORE:return ee.default;case ie.ChannelTypes.GUILD_ANNOUNCEMENT:return $.default;case ie.ChannelTypes.GUILD_STAGE_VOICE:return Q.default;default:return(0,m.isGuildTextChannelType)(n)?x.default:ue.NOOP_NULL}};n.renderHeader=function(){var e,t,n=this.props,a=n.cloneChannel,r=n.categoryId,l=n.onClose,s=this.state,i=s.channelType,o=s.isPrivate
;e=null!=a?de.default.Messages.CLONE_CHANNEL:i===ie.ChannelTypes.GUILD_CATEGORY?de.default.Messages.CREATE_CATEGORY:i===ie.ChannelTypes.GUILD_TEXT?o?de.default.Messages.CREATE_PRIVATE_TEXT_CHANNEL:de.default.Messages.CREATE_TEXT_CHANNEL:i===ie.ChannelTypes.GUILD_STORE?de.default.Messages.CREATE_STORE_CHANNEL:i===ie.ChannelTypes.GUILD_ANNOUNCEMENT?de.default.Messages.CREATE_NEWS_CHANNEL:i===ie.ChannelTypes.GUILD_STAGE_VOICE?de.default.Messages.CREATE_STAGE_CHANNEL:i===ie.ChannelTypes.GUILD_FORUM?de.default.Messages.CREATE_FORUM_CHANNEL:o?de.default.Messages.CREATE_PRIVATE_VOICE_CHANNEL:de.default.Messages.CREATE_VOICE_CHANNEL;if(null!=r){var u,d=O.default.getChannel(r);t=_e(re.default,{size:re.default.Sizes.SIZE_12,className:ce.default.subtitle},void 0,de.default.Messages.IN_CATEGORY.format({categoryName:null!==(u=null==d?void 0:d.name)&&void 0!==u?u:""}))}return _e(te.ModalHeader,{separator:!1,direction:w.default.Direction.VERTICAL,align:w.default.Align.CENTER,
className:ce.default.header},void 0,_e(ne.default,{id:this.headerId,tag:ne.default.Tags.H2,size:ne.default.Sizes.SIZE_24,className:ce.default.modalTitle},void 0,e),_e(re.default,{size:re.default.Sizes.SIZE_16,color:re.default.Colors.HEADER_SECONDARY,className:ce.default.headerSubtitle},void 0,t),_e(te.ModalCloseButton,{onClick:l,className:ce.default.closeButton}))};n.renderName=function(){var e,t,n=this.props,a=n.cloneChannel,r=n.channelType,l=this.state.errors;null!=(null==l?void 0:l.name)&&(e=_e(re.default,{size:re.default.Sizes.SIZE_12,color:re.default.Colors.STATUS_RED,className:ce.default.error},void 0,l.name));null!=a&&(t=_e(V.default,{className:ce.default.cloneInfo,type:V.default.Types.DESCRIPTION},void 0,de.default.Messages.CLONE_CHANNEL_HELP.format({name:(0,_.computeChannelName)(a,P.default,b.default,!0)})));var s,i=r===ie.ChannelTypes.GUILD_CATEGORY;s=i?de.default.Messages.CATEGORY_NAME:de.default.Messages.FORM_LABEL_CHANNEL_NAME;var o=this.getIconComponent()
;return _e(j.default,{title:s,titleClassName:ce.default.sectionTitle,className:ce.default.name},void 0,_e(F.default,{value:this.state.name,onChange:this.handleNameChange,inputRef:this.setInputRef,maxLength:100,placeholder:i?de.default.Messages.CATEGORY_NAME_PLACEHOLDER:de.default.Messages.CHANNEL_NAME_PLACEHOLDER,className:ce.default.inputWrapper,inputClassName:i?null:ce.default.inputInner,prefixElement:i?null:_e(o,{className:ce.default.inputPrefix,width:16,height:16}),autoFocus:!0}),e,t)};n.renderType=function(){var e=this.props,t=e.cloneChannel,n=e.applications,a=e.canCreateStoreChannel,r=e.canCreateAnnouncementChannel,l=e.canCreateStageChannel,s=e.canCreateForumChannel,i=this.state,o=i.channelType,u=i.isPrivate;if(null==t&&o!==ie.ChannelTypes.GUILD_CATEGORY){var d=null!=n&&n.length>0;return _e(j.default,{title:de.default.Messages.CHANNEL_TYPE,titleClassName:ce.default.sectionTitle,className:ce.default.type},void 0,_e(H.default,{options:Ne(u,a&&d,r,l,s),value:o,
onChange:this.handleTypeChange}))}};n.renderChannelTypeDescription=function(e){var t;e===ie.ChannelTypes.GUILD_ANNOUNCEMENT&&(t=de.default.Messages.FORM_HELP_NEWS.format({documentationLink:se.default.getArticleURL(ie.HelpdeskArticles.ANNOUNCEMENT_CHANNELS)}));return null==t?null:_e(V.default,{className:ce.default.channelTypeDescription,type:V.default.Types.DESCRIPTION},void 0,t)};n.renderStoreOptions=function(){var e=this.props.applications,t=this.state,n=t.applicationId,a=t.skuId,r=t.branchId,s=t.showBranches,i=t.hasBranches;if(null==e||0===e.length)throw new Error("Unexpected empty applications");return _e("div",{},void 0,_e(z.default,{tag:z.default.Tags.H5},void 0,de.default.Messages.CREATE_STORE_CHANNEL_APPLICATION),_e(ae.SingleSelect,{options:e.map((function(e){return{label:e.name,value:e.id}})),placeholder:de.default.Messages.CREATE_STORE_CHANNEL_SELECT_APPLICATION,value:n,onChange:this.handleApplicationChange,className:ce.default.storeChannelOptionSelector
}),null!=n?_e(l.Fragment,{},void 0,_e(z.default,{tag:z.default.Tags.H5},void 0,de.default.Messages.CREATE_STORE_CHANNEL_SKU),_e(h.default,{applicationId:n,onChange:this.handleSKUChange,selectedSkuId:a,className:ce.default.storeChannelOptionSelector},n)):null,null!=n&&i?_e(k.default,{hideBorder:!0,onChange:this.handleShowBranchesToggle,value:s,note:de.default.Messages.CREATE_STORE_CHANNEL_BETA_NOTE.format({devPortalUrl:ie.MarketingURLs.API_DOCS_GAME_AND_SERVER_MANAGEMENT})},void 0,_e(Z.default,{className:ce.default.switchIcon}),de.default.Messages.CREATE_STORE_CHANNEL_BETA_TITLE):null,null!=n?_e(l.Fragment,{},void 0,s?_e(z.default,{tag:z.default.Tags.H5},void 0,de.default.Messages.CREATE_STORE_CHANNEL_BRANCH):null,_e(p.default,{applicationId:n,onChange:this.handleBranchChange,selectedBranchId:r,hide:!s,onHasBranchesChange:this.handleHasBranchesChange,className:ce.default.storeChannelOptionSelector},n)):null)};n.renderPrivacyOptions=function(){
var e=this.props.cloneChannel,t=this.state,n=t.channelType,a=t.isPrivate;if(null!=e||n===ie.ChannelTypes.GUILD_ANNOUNCEMENT)return null;var r=de.default.Messages.PRIVATE_CHANNEL,l=de.default.Messages.CHANNEL_PERMISSIONS_PRIVATE_CHANNEL_DESCRIPTION;if(n===ie.ChannelTypes.GUILD_CATEGORY){r=de.default.Messages.PRIVATE_CATEGORY;l=de.default.Messages.CHANNEL_PERMISSIONS_PRIVATE_CATEGORY_DESCRIPTION}else n===ie.ChannelTypes.GUILD_VOICE&&(l=de.default.Messages.CHANNEL_PERMISSIONS_PRIVATE_CHANNEL_DESCRIPTION_VOICE);return _e(j.default,{},"privacy-switch",_e(k.default,{hideBorder:!0,onChange:this.handlePrivacyChange,value:a,note:l},void 0,_e(X.default,{className:ce.default.switchIcon}),r))};n.renderError=function(e){var t,n=this.state,a=n.channelType,r=n.isPrivate,l=n.errors,i=this.props,o=i.canConnect,u=i.canViewChannels;if(Object.values(l).length>0){if(null!=l.message&&""!==l.message)t=l.message;else if(e||null==l.name){var d=Object.values(l)[0];d.length>0&&(t=d)}}else r&&!(0,
v.canCreatePrivateChannel)(a,u,o)&&(t=(0,v.getPrivateChannelHintText)(a));if(null!=t){var c;return _e("div",{className:(0,s.default)(ce.default.createError,(c={},c[ce.default.addMemberError]=e,c))},void 0,_e(G.default,{messageType:G.HelpMessageTypes.ERROR},void 0,t))}};n.renderFooter=function(){var e,t=this,n=this.props,a=n.channelType,l=n.onClose,s=this.state.channelType,i=this.state.isPrivate;e=a===ie.ChannelTypes.GUILD_CATEGORY?de.default.Messages.CREATE_CATEGORY:de.default.Messages.CREATE_CHANNEL;var o=i||s===ie.ChannelTypes.GUILD_STAGE_VOICE;return _e(te.ModalFooter,{},void 0,o?_e(D.default,{type:"button",onClick:function(){t.setState({slide:r.ADD_MEMBERS})},disabled:!this.canSubmit()},void 0,de.default.Messages.NEXT):_e(D.default,{type:"submit",disabled:!this.canSubmit()},void 0,e),_e(D.default,{onClick:l,look:D.default.Looks.LINK,color:D.default.Colors.PRIMARY},void 0,de.default.Messages.CANCEL))};n.renderAddMemberFooter=function(){
var e,t=this,n=this.props.channelType,a=this.state.pendingPermissionOverwrites;e=0===Object.keys(a).length?de.default.Messages.SKIP:n===ie.ChannelTypes.GUILD_CATEGORY?de.default.Messages.CREATE_CATEGORY:de.default.Messages.CREATE_CHANNEL;return _e(te.ModalFooter,{},void 0,_e(D.default,{type:"submit",disabled:!this.canSubmit()},void 0,e),_e(D.default,{onClick:function(){t.setState({slide:r.CHANNEL_INFO})},look:D.default.Looks.LINK,color:D.default.Colors.PRIMARY},void 0,de.default.Messages.BACK))};n.handlePermissionOverwriteChange=function(e){this.setState({pendingPermissionOverwrites:e})};n.renderCreateChannelContent=function(){var e=this.state.channelType;return l.createElement(l.Fragment,null,this.renderHeader(),_e(te.ModalContent,{className:ce.default.modalContent
},void 0,this.renderType(),this.renderName(),e===ie.ChannelTypes.GUILD_STORE?this.renderStoreOptions():null,this.renderChannelTypeDescription(e),e===ie.ChannelTypes.GUILD_STAGE_VOICE?null:this.renderPrivacyOptions()),this.renderError(),this.renderFooter())};n.renderAddMemberSlideContent=function(){var e=this.state,t=e.name,n=e.channelType,a=this.props,r=a.guildId,s=a.onClose,i=this.getIconComponent(),o=n===ie.ChannelTypes.GUILD_STAGE_VOICE;return l.createElement(l.Fragment,null,_e(te.ModalHeader,{separator:!1,direction:w.default.Direction.VERTICAL,align:w.default.Align.CENTER,className:ce.default.header},void 0,_e(ne.default,{tag:ne.default.Tags.H2,size:ne.default.Sizes.SIZE_24,style:{fontWeight:700}},void 0,o?de.default.Messages.CHANNEL_PERMISSIONS_ADD_MODERATOR_TITLE:de.default.Messages.CHANNEL_PERMISSIONS_ADD_MEMBERS_TITLE),_e(re.default,{size:re.default.Sizes.SIZE_16,color:re.default.Colors.HEADER_SECONDARY,className:ce.default.headerSubtitle},void 0,_e(i,{height:16,width:16,
className:ce.default.headerSubtitleIcon}),t),_e(te.ModalCloseButton,{onClick:s,className:ce.default.closeButton})),this.renderError(!0),_e(Te,{onChange:this.handlePermissionOverwriteChange,guildId:r,channelType:n}),this.renderAddMemberFooter())};n.renderSlides=function(){var e=this.state.slide,t={impression_group:u.ImpressionGroups.CHANNEL_ADD_FLOW};return _e("div",{},void 0,_e(U.Slides,{activeSlide:e,width:440},void 0,_e(U.Slide,{id:r.CHANNEL_INFO,impressionName:u.ImpressionNames.CHANNEL_ADD_INFO,impressionProperties:t},void 0,this.renderCreateChannelContent()),_e(U.Slide,{id:r.ADD_MEMBERS,impressionName:u.ImpressionNames.CHANNEL_ADD_MEMBERS,impressionProperties:t},void 0,this.renderAddMemberSlideContent())))};n.render=function(){var e=this.props.transitionState;return _e("form",{onSubmit:this.handleSubmit},void 0,_e(te.ModalRoot,{transitionState:e,className:ce.default.modal,"aria-labelledby":this.headerId},void 0,this.renderSlides()))};return t}(l.PureComponent)
;Ae.displayName="CreateChannel";var ye=l.forwardRef((function(e,t){var n=e.channelType,a=e.guildId,r=e.cloneChannelId,s=(0,d.useStateFromStoresObject)([R.default,P.default,L.default,O.default,I.default,M.default],(function(){var e,t,l,s=R.default.getGuild(a),o=P.default.getCurrentUser();(0,i.default)(null!=o,"CreateChannel: user cannot be undefined");var u=null!=s&&null!=s.ownerId?P.default.getUser(s.ownerId):null,d=new Set(null!==(e=null===(t=M.default.getMember(a,o.id))||void 0===t?void 0:t.roles)&&void 0!==e?e:[]),c=L.default.can(ie.Permissions.ADMINISTRATOR,s),f=O.default.getChannel(r);return{applications:I.default.getApplicationsForGuild(a),canCreateStoreChannel:null!=s&&s.hasFeature(ie.GuildFeatures.COMMERCE),canCreateAnnouncementChannel:null!=s&&s.hasFeature(ie.GuildFeatures.NEWS),user:o,owner:u,memberRoleIds:d,canViewChannels:L.default.can(ie.Permissions.VIEW_CHANNEL,s),canConnect:L.default.can(ie.Permissions.CONNECT,s),isAdmin:c,cloneChannel:f,
channelType:null!==(l=null==f?void 0:f.type)&&void 0!==l?l:n,canManageRoles:L.default.can(ie.Permissions.MANAGE_ROLES,s),canManageChannels:L.default.can(ie.Permissions.MANAGE_CHANNELS,s)}})),o=s.canManageRoles,u=s.canManageChannels,c=(0,g.useGuildEligibleForStageChannels)(a)&&o&&u,f=(0,T.useCanCreateForumChannel)(a);return l.createElement(Ae,ve({},e,s,{canCreateStageChannel:c,canCreateForumChannel:f,ref:t}))}));t.default=ye},920812:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.createModeratorOverwrite=M;t.default=L;var a,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var s=r?Object.getOwnPropertyDescriptor(e,l):null;s&&(s.get||s.set)?Object.defineProperty(a,l,s):a[l]=e[l]}a.default=e;n&&n.set(e,a);return a
}(n(667294)),l=n(536211),s=n(804394),i=n(327269),o=n(81069),u=n(403575),d=S(n(644263)),c=S(n(30098)),f=S(n(956117)),p=S(n(530250)),h=n(354479),E=S(n(332282)),C=n(3400),_=S(n(971639)),v=S(n(776360)),N=S(n(656016)),T=n(365744),A=n(739889),y=S(n(247001)),g=S(n(102437));function S(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function O(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var l=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),1===s)t.children=r;else if(s>1){for(var i=new Array(s),o=0;o<s;o++)i[o]=arguments[o+3];t.children=i}if(t&&l)for(var u in l)void 0===t[u]&&(t[u]=l[u]);else t||(t=l||{});return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function I(e,t,n,a,r,l,s){try{var i=e[l](s),o=i.value}catch(e){n(e);return}i.done?t(o):Promise.resolve(o).then(a,r)}
function M(e,t){return{id:e,type:t,deny:N.default.NONE,allow:T.MODERATE_STAGE_CHANNEL_PERMISSIONS}}function R(e,t){var n=Object.values(t).filter((function(e){return null!=e.row.id})).map((function(e){var t=e.row;return t.rowType===A.RowType.ROLE?M(t.id,o.PermissionOverwriteType.ROLE):M(t.id,o.PermissionOverwriteType.MEMBER)}));return(0,s.savePermissionUpdates)(e.id,n,!0)}function L(e){var t=e.transitionState,n=e.onClose,a=e.channelId,s=(0,h.useUID)(),o=(0,l.useStateFromStores)([d.default],(function(){return d.default.getChannel(a)})),N=(0,l.useStateFromStores)([c.default],(function(){return c.default.getGuild(null==o?void 0:o.getGuildId())})),A=r.useState({}),S=A[0],m=A[1],M=r.useState(!1),L=M[0],b=M[1],P=r.useState(null),D=P[0],w=P[1];if(null==o||null==N)return null;var G=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b(!0);e.prev=1;e.next=4;return R(o,S);case 4:n();e.next=12;break
;case 7:e.prev=7;e.t0=e.catch(1);t=new i.APIError(e.t0);b(!1);w(t);case 12:case"end":return e.stop()}}),e,null,[[1,7]])})),function(){var t=this,n=arguments;return new Promise((function(a,r){var l=e.apply(t,n);function s(e){I(l,a,r,s,i,"next",e)}function i(e){I(l,a,r,s,i,"throw",e)}s(void 0)}))});return function(){return t.apply(this,arguments)}}();return O(C.ModalRoot,{transitionState:t,"aria-labelledby":s,size:C.ModalSize.SMALL,className:g.default.modalRoot},void 0,O(C.ModalHeader,{separator:!1,direction:p.default.Direction.VERTICAL,align:p.default.Align.CENTER,className:g.default.header},void 0,O(_.default,{tag:_.default.Tags.H2,size:_.default.Sizes.SIZE_24},void 0,y.default.Messages.CHANNEL_PERMISSIONS_ADD_MEMBERS_TITLE),O(v.default,{size:v.default.Sizes.SIZE_16,color:v.default.Colors.HEADER_SECONDARY,className:g.default.headerSubtitle},void 0,O(E.default,{height:16,width:16,className:g.default.headerSubtitleIcon}),o.name)),O(u.AddMembersBody,{guild:N,channel:o,
permission:T.MODERATE_STAGE_CHANNEL_PERMISSIONS,pendingAdditions:S,setPendingAdditions:m}),null!=D?O(v.default,{className:g.default.error,size:v.default.Sizes.SIZE_12,color:v.default.Colors.STATUS_RED},void 0,D.getAnyErrorMessage()):null,O(C.ModalFooter,{},void 0,O(f.default,{onClick:G,submitting:L},void 0,y.default.Messages.ADD),O(f.default,{look:f.default.Looks.LINK,color:f.default.Colors.PRIMARY,onClick:n},void 0,y.default.Messages.CANCEL)))}L.displayName="AddModeratorsModal"},359012:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var a,r=i(n(536211)),l=i(n(636602)),s=n(770348);function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){o=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return o(e,t)}var u={};var d=new(function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;o(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}t.prototype.getBranches=function(e){var t
;return null!==(t=u[e])&&void 0!==t?t:[]};return t}(r.default.Store))(l.default,((a={})[s.ActionTypes.OWNED_APPLICATION_BRANCHES_FETCH_SUCCESS]=function(e){var t=e.applicationId,n=e.branches;u[t]=n},a[s.ActionTypes.LOGOUT]=function(){u={}},a));t.default=d}}]);
//# sourceMappingURL=c45dc04162fdcd2176d7.js.map