"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[33970,59927],{590312:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.WELCOME_SCREEN_TYPE=t.WELCOME_EMOJI_TOOLTIP_STORAGE_KEY=void 0;t.WELCOME_SCREEN_TYPE="Guild Welcome Screen";t.WELCOME_EMOJI_TOOLTIP_STORAGE_KEY="hasClickedWelcomeEmojiPicker"},131629:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=t.NO_WELCOME_SCREEN=void 0;var l,o=i(n(536211)),a=i(n(636602)),u=n(770348);function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){r=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return r(e,t)}var d={};t.NO_WELCOME_SCREEN=d;var s={},f={},E=!1,c=!1,_=!1;function C(e){var t=e.invite.guild;if(null!=(null==t?void 0:t.welcome_screen)){s[t.id]=t.welcome_screen;return!0}return!1}function p(e){var t=e.welcomeScreen,n=e.guildId;s[n]=null!=t?t:d}var S=new(function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;r(e,t)}(t,e)
;function t(){return e.apply(this,arguments)||this}var n=t.prototype;n.get=function(e){if(null!=e)return s[e]};n.isFetching=function(){return c};n.hasError=function(){return _};n.hasSeen=function(e,t){void 0===t&&(t=!1);return null!=e&&(t?E:f[e]||!1)};return t}(o.default.Store))(a.default,((l={})[u.ActionTypes.INVITE_RESOLVE_SUCCESS]=C,l[u.ActionTypes.INVITE_ACCEPT_SUCCESS]=C,l[u.ActionTypes.WELCOME_SCREEN_SUBMIT_SUCCESS]=p,l[u.ActionTypes.WELCOME_SCREEN_UPDATE]=p,l[u.ActionTypes.WELCOME_SCREEN_VIEW]=function(e){var t=e.guildId,n=e.isLurking;f[t]=!0;n&&(E=!0)},l[u.ActionTypes.GUILD_STOP_LURKING]=function(){E=!1},l[u.ActionTypes.GUILD_DELETE]=function(e){var t=e.guild.id;f[t]=!1},l[u.ActionTypes.WELCOME_SCREEN_FETCH_START]=function(){c=!0;_=!1},l[u.ActionTypes.WELCOME_SCREEN_FETCH_SUCCESS]=function(e){c=!1;_=!1;var t=e.welcomeScreen,n=e.guildId;s[n]=null!=t?t:d},l[u.ActionTypes.WELCOME_SCREEN_FETCH_FAIL]=function(){c=!1;_=!0},l));t.default=S},833970:(e,t,n)=>{
Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var l,o=b(n(667294)),a=n(536211),u=k(n(972247)),i=k(n(498773)),r=k(n(284382)),d=n(678928),s=k(n(416355)),f=k(n(433385)),E=b(n(517286)),c=k(n(290629)),_=k(n(728429)),C=k(n(956117)),p=k(n(96124)),S=k(n(530250)),v=k(n(160629)),N=k(n(279950)),L=n(730977),O=n(354479),m=k(n(956303)),T=k(n(930600)),I=n(3400),M=k(n(971639)),A=k(n(614617)),y=k(n(776360)),g=k(n(656016)),h=k(n(131629)),P=k(n(869860)),D=n(590312),R=n(770348),W=k(n(247001)),j=k(n(585398));function k(e){return e&&e.__esModule?e:{default:e}}function U(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(U=function(e){return e?n:t})(e)}function b(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=U(t);if(n&&n.has(e))return n.get(e);var l={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){
var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(l,a,u):l[a]=e[a]}l.default=e;n&&n.set(e,l);return l}function G(){G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e};return G.apply(this,arguments)}function B(e,t,n,o){l||(l="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,u=arguments.length-3;if(t||0===u||(t={children:void 0}),1===u)t.children=o;else if(u>1){for(var i=new Array(u),r=0;r<u;r++)i[r]=arguments[r+3];t.children=i}if(t&&a)for(var d in a)void 0===t[d]&&(t[d]=a[d]);else t||(t=a||{});return{$$typeof:l,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var w=function(e){var t,n,l=e.guildId,k=e.welcomeChannel,U=e.transitionState,b=e.onSave,w=e.onClose,H=(0,
O.useUID)(),z=o.useState(null!=k?k.channel_id:null),Y=z[0],F=z[1],K=o.useState(null!=k?k.description:""),V=K[0],J=K[1],x=o.useState(null!=k?{id:k.emoji_id,name:k.emoji_name}:null),Z=x[0],$=x[1],q=o.useState(!1),Q=q[0],X=q[1],ee=(0,a.useStateFromStores)([f.default],(function(){return null!=(null==Z?void 0:Z.id)?f.default.getUsableCustomEmojiById(Z.id):null})),te=(0,a.useStateFromStores)([E.default],(function(){return E.default.getChannels(l)[E.GUILD_SELECTABLE_CHANNELS_KEY]}),[l]),ne=(0,a.useStateFromStores)([h.default],(function(){return h.default.get(l)})),le=null!==(t=null==ne||null===(n=ne.welcome_channels)||void 0===n?void 0:n.map((function(e){return e.channel_id})))&&void 0!==t?t:[],oe=o.useState(!1),ae=oe[0],ue=oe[1];o.useEffect((function(){u.default.get(D.WELCOME_EMOJI_TOOLTIP_STORAGE_KEY)||setTimeout((function(){return ue(!0)}),300)}),[]);var ie=[];te.forEach((function(e){var t=e.channel
;!g.default.canEveryoneRole(R.Permissions.VIEW_CHANNEL,t)||(null==k?void 0:k.channel_id)!==t.id&&le.includes(t.id)||ie.push({value:t.id,label:(0,d.computeChannelName)(t,_.default,c.default,!0)})}));var re=function(){ue(!1);w()},de=o.useCallback((function(e){return J(e)}),[]),se=o.useCallback((function(){u.default.set(D.WELCOME_EMOJI_TOOLTIP_STORAGE_KEY,!0);ue(!1)}),[]);return B(r.default,{page:R.AnalyticsPages.CHANNEL_WELCOME_CREATE_MODAL},void 0,B(I.ModalRoot,{transitionState:U,"aria-labelledby":H},void 0,B("div",{className:j.default.modalContents},void 0,B(I.ModalCloseButton,{onClick:re,className:j.default.closeButton}),B(M.default,{size:M.default.Sizes.SIZE_16,className:j.default.headerText,id:H},void 0,null==k?W.default.Messages.GUILD_SETTINGS_PUBLIC_WELCOME_RECOMMENDED_CHANNEL_MODAL_ADD:W.default.Messages.GUILD_SETTINGS_PUBLIC_WELCOME_RECOMMENDED_CHANNEL_MODAL_EDIT),B(y.default,{size:y.default.Sizes.SIZE_14,color:y.default.Colors.HEADER_SECONDARY,
className:j.default.formDescription},void 0,W.default.Messages.GUILD_SETTINGS_PUBLIC_WELCOME_PICK_CHANNEL),B(m.default,{className:j.default.formGroup,title:W.default.Messages.GUILD_SETTINGS_PUBLIC_WELCOME_SELECT_A_CHANNEL},void 0,B(A.default,{options:ie,onChange:function(e){return F(e)},value:Y}),B(y.default,{size:y.default.Sizes.SIZE_14,color:y.default.Colors.HEADER_SECONDARY,className:j.default.formDescription},void 0,W.default.Messages.GUILD_SETTINGS_PUBLIC_WELCOME_ONLY_VIEWABLE_CHANNELS)),B(m.default,{className:j.default.formGroup,title:W.default.Messages.GUILD_SETTINGS_PUBLIC_WELCOME_SET_DESCRIPTION},void 0,B("div",{className:j.default.channelDescriptionWrapper},void 0,B("div",{className:j.default.emojiButtonContainer},void 0,B(v.default,{renderPopout:function(e){var t=e.closePopout,n=E.default.getDefaultChannel(l);return B(s.default,{guildId:l,closePopout:t,onSelectEmoji:function(e,n){!function(e){var t,n,l;null!=e&&$(null!=e.id?{id:null!==(t=e.id)&&void 0!==t?t:null,
name:null!==(n=e.name)&&void 0!==n?n:null}:{id:null,name:null!==(l=e.optionallyDiverseSequence)&&void 0!==l?l:null})}(e);n&&t()},pickerIntention:R.EmojiIntention.COMMUNITY_CONTENT,onNavigateAway:re,channel:n})},position:v.default.Positions.LEFT,animation:v.default.Animation.NONE,align:v.default.Align.BOTTOM},void 0,(function(e,t){var n=t.isShown;return B(L.TooltipContainer,{color:L.TooltipColors.BRAND,tooltipClassName:j.default.tooltip,position:L.TooltipPositions.LEFT,text:ae?W.default.Messages.WELCOME_CHANNEL_EMOJI_PICKER_TOOLTIP:null,forceOpen:ae},void 0,o.createElement(p.default,G({},e,{onClick:function(t){var n;se();null===(n=e.onClick)||void 0===n||n.call(e,t)},active:n,className:j.default.emojiButton,tabIndex:0,renderButtonContents:null==Z||null==Z.id&&null==Z.name?null:function(){return B(i.default,{className:j.default.emoji,emojiId:Z.id,emojiName:Z.name,animated:Boolean(null==ee?void 0:ee.animated)})}})))}))),B(N.default,{maxLength:42,value:V,inputClassName:j.default.input,
placeholder:W.default.Messages.GUILD_SETTINGS_PUBLIC_WELCOME_CHANNEL_DESCRIPTION_PLACEHOLDER,onChange:de}),V.length>0||null!=Z?B(C.default,{className:j.default.clearButton,onClick:function(){J("");$(null)},look:C.default.Looks.BLANK,size:C.default.Sizes.NONE},void 0,B(T.default,{className:j.default.clearIcon})):null))),B(I.ModalFooter,{className:j.default.footer,justify:S.default.Justify.BETWEEN},void 0,B(S.default,{grow:0,align:S.default.Align.CENTER},void 0,B(C.default,{onClick:re,size:C.default.Sizes.SMALL,look:C.default.Looks.LINK,color:C.default.Colors.PRIMARY},void 0,W.default.Messages.CANCEL),B(C.default,{onClick:function(){null!=Y&&V.length>0&&b({channel_id:Y,description:V,emoji_id:null==Z?void 0:Z.id,emoji_name:null==Z?void 0:Z.name});re()},disabled:null==Y||0===V.length},void 0,W.default.Messages.SAVE)),null!=k&&B(C.default,{onClick:function(){X(!0)},size:C.default.Sizes.MIN,look:C.default.Looks.LINK,color:C.default.Colors.RED
},void 0,W.default.Messages.REMOVE)),Q&&B(P.default,{onConfirm:function(){b();re()},onCancel:function(){return X(!1)},channelId:Y})))};w.displayName="CreateWelcomeChannelModal";var H=w;t.default=H}}]);
//# sourceMappingURL=99ae6be827b6df914483.js.map